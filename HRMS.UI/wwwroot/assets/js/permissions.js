//[
//    "add-assignrole",
//    "add-bankmaster",
//    "add-branchmaster",
//    "add-bulkincrement",
//    "add-companydetails",
//    "add-departmentmaster",
//    "add-designationmaster",
//    "add-employeeincrement",
//    "add-employeeincrementapplication",
//    "add-employeemaster",
//    "add-essadminleaveapproval",
//    "add-esscomp-offapplication",
//    "add-esscomp-offapproval",
//    "add-essemployeedirectory",
//    "add-essemployeeinoutrecord",
//    "add-essitdeclarationform",
//    "add-essleaveapplication",
//    "add-essleaveapprovalpage",
//    "add-essmyinout",
//    "add-essmyprofile",
//    "add-essprecomp-offapplication",
//    "add-essprecomp-offapproval",
//    "add-essshiftchange",
//    "add-essticketclose",
//    "add-essticketopen",
//    "add-geolocationmasterassign",
//    "add-grademaster",
//    "add-gradewiseallowance",
//    "add-holidaymaster",
//    "add-leftemployeedetails",
//    "add-managerole",
//    "add-organizationpolicy",
//    "add-reasonmaster",
//    "add-statemaster",
//    "add-tickettype",
//    "add-warningmaster",
//    "add-weekoffmaster",
//    "delete-assignrole",
//    "delete-bankmaster",
//    "delete-branchmaster",
//    "delete-bulkincrement",
//    "delete-companydetails",
//    "delete-departmentmaster",
//    "delete-designationmaster",
//    "delete-employeeincrement",
//    "delete-employeeincrementapplication",
//    "delete-employeemaster",
//    "delete-essadminleaveapproval",
//    "delete-esscomp-offapplication",
//    "delete-esscomp-offapproval",
//    "delete-essemployeedirectory",
//    "delete-essemployeeinoutrecord",
//    "delete-essitdeclarationform",
//    "delete-essleaveapplication",
//    "delete-essleaveapprovalpage",
//    "delete-essmyinout",
//    "delete-essmyprofile",
//    "delete-essprecomp-offapplication",
//    "delete-essprecomp-offapproval",
//    "delete-essshiftchange",
//    "delete-essticketclose",
//    "delete-essticketopen",
//    "delete-geolocationmasterassign",
//    "delete-grademaster",
//    "delete-gradewiseallowance",
//    "delete-holidaymaster",
//    "delete-leftemployeedetails",
//    "delete-managerole",
//    "delete-organizationpolicy",
//    "delete-reasonmaster",
//    "delete-statemaster",
//    "delete-tickettype",
//    "delete-warningmaster",
//    "delete-weekoffmaster",
//    "edit-assignrole",
//    "edit-bankmaster",
//    "edit-branchmaster",
//    "edit-bulkincrement",
//    "edit-companydetails",
//    "edit-departmentmaster",
//    "edit-designationmaster",
//    "edit-employeeincrement",
//    "edit-employeeincrementapplication",
//    "edit-employeemaster",
//    "edit-essadminleaveapproval",
//    "edit-esscomp-offapplication",
//    "edit-esscomp-offapproval",
//    "edit-essemployeedirectory",
//    "edit-essemployeeinoutrecord",
//    "edit-essitdeclarationform",
//    "edit-essleaveapplication",
//    "edit-essleaveapprovalpage",
//    "edit-essmyinout",
//    "edit-essmyprofile",
//    "edit-essprecomp-offapplication",
//    "edit-essprecomp-offapproval",
//    "edit-essshiftchange",
//    "edit-essticketclose",
//    "edit-essticketopen",
//    "edit-geolocationmasterassign",
//    "edit-grademaster",
//    "edit-gradewiseallowance",
//    "edit-holidaymaster",
//    "edit-leftemployeedetails",
//    "edit-managerole",
//    "edit-organizationpolicy",
//    "edit-reasonmaster",
//    "edit-statemaster",
//    "edit-tickettype",
//    "edit-warningmaster",
//    "edit-weekoffmaster",
//    "view-admindashboard",
//    "view-adminswitch",
//    "view-assignpermission",
//    "view-assignrole",
//    "view-bankmaster",
//    "view-branchmaster",
//    "view-bulkincrement",
//    "view-changecompanyswitch",
//    "view-companydetails",
//    "view-companyinformation",
//    "view-companystructure",
//    "view-controlpanel",
//    "view-departmentmaster",
//    "view-designationmaster",
//    "view-employeeincrement",
//    "view-employeeincrementapplication",
//    "view-employeemaster",
//    "view-employeemastermenu",
//    "view-essadminleaveapproval",
//    "view-esschangepassword",
//    "view-esscomp-offapplication",
//    "view-esscomp-offapproval",
//    "view-esscomp-offmenu",
//    "view-essdashboard",
//    "view-essemployeedirectory",
//    "view-essemployeeinoutrecord",
//    "view-essemployeemenu",
//    "view-essitdeclarationform",
//    "view-essleaveapplication",
//    "view-essleaveapprovalmenu",
//    "view-essleaveapprovalpage",
//    "view-essleavemenu",
//    "view-essmemberdetails",
//    "view-essmembershift",
//    "view-essmyinout",
//    "view-essmyprofile",
//    "view-essmyreports",
//    "view-essmyteammenu",
//    "view-essprecomp-offapplication",
//    "view-essprecomp-offapproval",
//    "view-essprobationselfrating",
//    "view-esssalarydetailsmenu",
//    "view-essshiftchange",
//    "view-essswitch",
//    "view-essticketclose",
//    "view-essticketopen",
//    "view-essticketrequest",
//    "view-geolocationmasterassign",
//    "view-grademaster",
//    "view-gradewiseallowance",
//    "view-holidaymaster",
//    "view-importdata",
//    "view-jobmaster",
//    "view-leftemployeedetails",
//    "view-managerole",
//    "view-manageroleandpermission",
//    "view-organizationpolicy",
//    "view-othermaster",
//    "view-reasonmaster",
//    "view-statemaster",
//    "view-tickettype",
//    "view-warningmaster",
//    "view-weekoffmaster"
//]
(async function () {
    document.getElementById("loader").style.display = "flex";
    async function loadUserPermision() {

        try {
            const response = await fetch(BaseUrlLayout + '/RolePermissionAPI/GetAllUserAndRolePermissionList/' + UserId, {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + localStorage.getItem("authToken"),
                    'Content-Type': 'application/json'
                }
            });

            const dataPermission = await response.json();

            if (dataPermission.isSuccess) {
                //console.log(dataPermission);
                permissions = dataPermission.data;
            }
            else {
                permissions = [];
            }
        } catch (error) {
            document.getElementById("loader").style.display = "none";
            console.error('Fetch error:', error);
        }
        
    }

    let tokenPermission = localStorage.getItem("authToken");
    var decodedToken = "";
    let UserId = 0;
    let permissions = [];
  
    if (tokenPermission) {
  
        const decodedToken = jwt_decode(tokenPermission);
        const roleSlug = decodedToken.RoleSlug;
         UserId = parseInt(decodedToken.Id);
        if (roleSlug == "super-admin")
        {
            //$("#dropdownESSSwitch").show();
            //$("#dropdownAdminSwitch").show();
            $("#drpManageRoleAndPermission").show();
            $("#drpCompanyInformationMenu").show();
            $("#AddCompanyDetails").show();
            $("#companyInfo").show();
        }

        if (roleSlug == "ess" || roleSlug == "admin")
        {
            await loadUserPermision();
            /*Ess switch*/
            if (permissions.includes("view-essswitch")) {
                $("#dropdownESSSwitch").show();
            }
            if (permissions.includes("block-essswitch")) {
                $("#dropdownESSSwitch").hide();
            }

            /*Admin switch*/
            if (permissions.includes("view-adminswitch")) {
                $("#dropdownAdminSwitch").show();
            }
            if (permissions.includes("block-adminswitch")) {
                $("#dropdownAdminSwitch").hide();
            }


            // EmployeeLayout Permission

            if (permissions.includes("view-essmemberdetails"))
            {
                $(".essSalaryDetailsMenu").show();
            }
            if (permissions.includes("block-essmemberdetails"))
            {
                $(".essSalaryDetailsMenu").hide();
            }

            if (permissions.includes("view-essitdeclarationform")) {
                $(".essItDeclarationForm").show();
            }
            if (permissions.includes("block-essitdeclarationform")) {
                $(".essItDeclarationForm").hide();
            }

            if (permissions.includes("view-essleavemenu")) {
                $(".essLeaveMenu").show();
            }
            if (permissions.includes("block-essleavemenu")) {
                $(".essLeaveMenu").hide();
            }
            if (permissions.includes("view-essleaveapplication")) {
                $(".essLeaveApplication").show();
            }
            if (permissions.includes("block-essleaveapplication")) {
                $(".essLeaveApplication").hide();
            }
            if (permissions.includes("view-essleaveapprovalmenu")) {
                $(".essLeaveApprovalSubMenu").show();
            }
            if (permissions.includes("block-essleaveapprovalmenu")) {
                $(".essLeaveApprovalSubMenu").hide();
            }
            if (permissions.includes("view-essleaveapprovalpage")) {
                $(".essLeaveApproval").show();
            }
            if (permissions.includes("block-essleaveapprovalpage")) {
                $(".essLeaveApproval").hide();
            }

            if (permissions.includes("view-esscomp-offmenu")) {
                $(".essCompOffMenu").show();
            }
            if (permissions.includes("block-esscomp-offmenu")) {
                $(".essCompOffMenu").hide();
            }
            if (permissions.includes("view-essprecomp-offapproval")) {
                $(".essCompOffApproval").show();
            }
            if (permissions.includes("block-essprecomp-offapproval")) {
                $(".essCompOffApproval").hide();
            }
            if (permissions.includes("view-essprecomp-offapplication")) {
                $(".essCompOffApplication").show();
            }
            if (permissions.includes("block-essprecomp-offapplication")) {
                $(".essCompOffApplication").hide();
            }

            //if (permissions.includes("view-essprecomp-offapplication")) {
            //    $(".essAttedenceRegularization").show();
            //}
            //if (permissions.includes("block-essprecomp-offapplication")) {
            //    $(".essAttedenceRegularization").hide();
            //}

            if (permissions.includes("view-essmyteammenu")) {
                $(".essMyTeamMenu").show();
            }
            if (permissions.includes("block-essmyteammenu")) {
                $(".essMyTeamMenu").hide();
            }
            if (permissions.includes("view-essmembershift")) {
                $(".essMemberShift").show();
            }
            if (permissions.includes("block-essmembershift")) {
                $(".essMemberShift").hide();
            }
            if (permissions.includes("view-essshiftchange")) {
                $(".essShiftChange").show();
            }
            if (permissions.includes("block-essshiftchange")) {
                $(".essShiftChange").hide();
            }
            if (permissions.includes("view-essemployeeinoutrecord")) {
                $(".essMemberInOutRecord").show();
            }
            if (permissions.includes("block-essemployeeinoutrecord")) {
                $(".essMemberInOutRecord").hide();
            }
            if (permissions.includes("view-essmemberdetails")) {
                $(".essMemberDetails").show();
            }
            if (permissions.includes("block-essmemberdetails")) {
                $(".essMemberDetails").hide();
            }
            if (permissions.includes("view-essmyreports")) {
                $(".essMyReports").show();
            }
            if (permissions.includes("block-essmyreports")) {
                $(".essMyReports").hide();
            }

            if (permissions.includes("view-myreport")) {
                $(".essMyReportMenu").show();
            }
            if (permissions.includes("block-myreport")) {
                $(".essMyReportMenu").hide();
            }


            if (permissions.includes("view-essmyinout")) {
                $(".essMyInout").show();
            }
            if (permissions.includes("block-essmyinout")) {
                $(".essMyInout").hide();
            }
            if (permissions.includes("view-essmyprofile")) {
                $(".essMyProfile").show();
            }
            if (permissions.includes("block-essmyprofile")) {
                $(".essMyProfile").hide();
            }


            if (permissions.includes("view-admindashboard")) { }
            if (permissions.includes("block-admindashboard")) { }

            if (permissions.includes("view-adminswitch")) { }
            if (permissions.includes("block-adminswitch")) { }

            if (permissions.includes("view-assignpermission")) { }
            if (permissions.includes("block-assignpermission")) { }

            if (permissions.includes("view-assignrole")) { }
            if (permissions.includes("block-assignrole")) { }

            if (permissions.includes("view-bankmaster")) { }
            if (permissions.includes("block-bankmaster")) { }

            if (permissions.includes("view-branchmaster")) { }
            if (permissions.includes("block-branchmaster")) { }

            if (permissions.includes("view-bulkincrement")) { }
            if (permissions.includes("block-bulkincrement")) { }

            if (permissions.includes("view-changecompanyswitch")) { }
            if (permissions.includes("block-changecompanyswitch")) { }

            if (permissions.includes("view-companydetails")) { }
            if (permissions.includes("block-companydetails")) { }

            if (permissions.includes("view-companyinformation")) { }
            if (permissions.includes("block-companyinformation")) { }

            if (permissions.includes("view-companystructure")) { }
            if (permissions.includes("block-companystructure")) { }

            if (permissions.includes("view-controlpanel")) { }
            if (permissions.includes("block-controlpanel")) { }

            if (permissions.includes("view-departmentmaster")) { }
            if (permissions.includes("block-departmentmaster")) { }

            if (permissions.includes("view-designationmaster")) { }
            if (permissions.includes("block-designationmaster")) { }

            if (permissions.includes("view-employeeincrement")) { }
            if (permissions.includes("block-employeeincrement")) { }

            if (permissions.includes("view-employeeincrementapplication")) { }
            if (permissions.includes("block-employeeincrementapplication")) { }

            if (permissions.includes("view-employeemaster")) { }
            if (permissions.includes("block-employeemaster")) { }

            if (permissions.includes("view-employeemastermenu")) { }
            if (permissions.includes("block-employeemastermenu")) { }

            if (permissions.includes("view-essadminleaveapproval")) { }
            if (permissions.includes("block-essadminleaveapproval")) { }

            if (permissions.includes("view-esschangepassword")) { }
            if (permissions.includes("block-esschangepassword")) { }

            if (permissions.includes("view-esscomp-offapplication")) { }
            if (permissions.includes("block-esscomp-offapplication")) { }

            if (permissions.includes("view-esscomp-offapproval")) { }
            if (permissions.includes("block-esscomp-offapproval")) { }

            if (permissions.includes("view-esscomp-offmenu")) { }
            if (permissions.includes("block-esscomp-offmenu")) { }

            if (permissions.includes("view-essdashboard")) { }
            if (permissions.includes("block-essdashboard")) { }

            if (permissions.includes("view-essemployeedirectory"))
            {
                $(".essEmployeeDirectory").show();
            }
            if (permissions.includes("block-essemployeedirectory"))
            {
                $(".essEmployeeDirectory").hide();
            }

            if (permissions.includes("view-essemployeeinoutrecord")) { }
            if (permissions.includes("block-essemployeeinoutrecord")) { }

            if (permissions.includes("view-essemployeemenu"))
            {
                $(".essEmployeeMenu").show();
            }
            if (permissions.includes("block-essemployeemenu"))
            {
                $(".essEmployeeMenu").hide();
            }

            if (permissions.includes("view-essitdeclarationform")) { }
            if (permissions.includes("block-essitdeclarationform")) { }

            if (permissions.includes("view-essleaveapplication")) { }
            if (permissions.includes("block-essleaveapplication")) { }

            if (permissions.includes("view-essleaveapprovalmenu")) { }
            if (permissions.includes("block-essleaveapprovalmenu")) { }

            if (permissions.includes("view-essleaveapprovalpage")) { }
            if (permissions.includes("block-essleaveapprovalpage")) { }

            if (permissions.includes("view-essleavemenu")) { }
            if (permissions.includes("block-essleavemenu")) { }

            if (permissions.includes("view-essmemberdetails")) { }
            if (permissions.includes("block-essmemberdetails")) { }

            if (permissions.includes("view-essmembershift")) { }
            if (permissions.includes("block-essmembershift")) { }

            
            
            if (permissions.includes("view-essmyreports")) { }
            if (permissions.includes("block-essmyreports")) { }

            if (permissions.includes("view-essmyteammenu")) { }
            if (permissions.includes("block-essmyteammenu")) { }

            if (permissions.includes("view-essprecomp-offapplication")) { }
            if (permissions.includes("block-essprecomp-offapplication")) { }

            if (permissions.includes("view-essprecomp-offapproval")) { }
            if (permissions.includes("block-essprecomp-offapproval")) { }

            if (permissions.includes("view-essprobationselfrating"))
            {
                $(".essProbationSelfRating").show();
            }
            if (permissions.includes("block-essprobationselfrating"))
            {
                $(".essProbationSelfRating").hide();
            }

            if (permissions.includes("view-esssalarydetailsmenu")) { }
            if (permissions.includes("block-esssalarydetailsmenu")) { }

            if (permissions.includes("view-essshiftchange")) { }
            if (permissions.includes("block-essshiftchange")) { }

            if (permissions.includes("view-essswitch")) { }
            if (permissions.includes("block-essswitch")) { }

            if (permissions.includes("view-essticketclose"))
            {
                $(".essTicketClose").show();
            }
            if (permissions.includes("block-essticketclose"))
            {
                $(".essTicketClose").hide();
            }

            if (permissions.includes("view-essticketopen"))
            {
                $(".essOpenTicket").show();
            }
            if (permissions.includes("block-essticketopen"))
            {
                $(".essOpenTicket").hide();
            }

            if (permissions.includes("view-essticketrequest"))
            {
                $(".essTicketRequest").show();
            }
            if (permissions.includes("block-essticketrequest"))
            {
                $(".essTicketRequest").hide();
            }

            if (permissions.includes("view-geolocationmasterassign")) { }
            if (permissions.includes("block-geolocationmasterassign")) { }

            if (permissions.includes("view-grademaster")) { }
            if (permissions.includes("block-grademaster")) { }

            if (permissions.includes("view-gradewiseallowance")) { }
            if (permissions.includes("block-gradewiseallowance")) { }

            if (permissions.includes("view-holidaymaster")) { }
            if (permissions.includes("block-holidaymaster")) { }

            if (permissions.includes("view-importdata")) { }
            if (permissions.includes("block-importdata")) { }

            if (permissions.includes("view-jobmaster")) { }
            if (permissions.includes("block-jobmaster")) { }

            if (permissions.includes("view-leftemployeedetails")) { }
            if (permissions.includes("block-leftemployeedetails")) { }

            if (permissions.includes("view-managerole")) { }
            if (permissions.includes("block-managerole")) { }

            if (permissions.includes("view-manageroleandpermission")) { }
            if (permissions.includes("block-manageroleandpermission")) { }

            if (permissions.includes("view-organizationpolicy")) { }
            if (permissions.includes("block-organizationpolicy")) { }

            if (permissions.includes("view-othermaster")) { }
            if (permissions.includes("block-othermaster")) { }

            if (permissions.includes("view-reasonmaster")) { }
            if (permissions.includes("block-reasonmaster")) { }

            if (permissions.includes("view-statemaster")) { }
            if (permissions.includes("block-statemaster")) { }

            if (permissions.includes("view-tickettype")) { }
            if (permissions.includes("block-tickettype")) { }

            if (permissions.includes("view-warningmaster")) { }
            if (permissions.includes("block-warningmaster")) { }

            if (permissions.includes("view-weekoffmaster")) { }
            if (permissions.includes("block-weekoffmaster")) { }



        }
        document.getElementById("loader").style.display = "none";

    }
    else {
        $(".body-hiden-wrapper").hide();
        localStorage.clear();
        window.location.href = uiBaseUrlLayout + '/AuthManage/Login';
        document.getElementById("loader").style.display = "none";
    }


})();