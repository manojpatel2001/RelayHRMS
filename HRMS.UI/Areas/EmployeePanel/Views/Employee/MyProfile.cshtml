@inject IConfiguration Configuration
@{
    ViewData["Title"] = "My Profile";
    Layout = "~/Areas/EmployeePanel/Views/Shared/_EmployeeLayout.cshtml";
    string baseUrl = Configuration["BaseUrlSettings:baseUrl"];
    string UIBaseUrl = Configuration["UIBaseUrlSettings:baseUrl"];
    var uriAPI = new Uri(baseUrl);
    string baseAPIDomainUrl = $"{uriAPI.Scheme}://{uriAPI.Host}:{uriAPI.Port}";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body {
        font-family: Arial, sans-serif;
    }

    .form-label-fixed {
        width: 180px;
        text-align: right;
        margin-right: 10px;
        font-weight: normal;
        background-color: transparent;
        display: inline-block;
        white-space: nowrap;
    }

    .center-heading {
        text-align: center;
    }

    .icon-container {
        display: flex;
        flex-wrap: wrap; /* allow wrapping */
        justify-content: flex-start;
        gap: 16px; /* increase spacing if needed */
        padding: 12px;
    }



    .icon-box {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        margin: 0 auto;
    }

    .icon-label {
        text-align: center;
        font-size: 11px;
        margin-top: 6px;
        width: 70px;
        word-break: break-word;
        line-height: 1.2;
        margin: 6px auto 0 auto;
    }

    .icon-item {
        text-align: center;
        width: 70px;
        cursor: pointer;
    }

    .orange {
        background-color: #f4511e;
    }

    .blue {
        background-color: #2196f3;
    }

    .red {
        background-color: #e53935;
    }

    .purple {
        background-color: #9c27b0;
    }

    .pink {
        background-color: #ec407a;
    }

    .dark {
        background-color: #424242;
    }

    .lime {
        background-color: #aed581;
        color: #000;
    }

    .yellow {
        background-color: #ffeb3b;
        color: #000;
    }

    .green {
        background-color: #4caf50;
    }

    .brown {
        background-color: #8d6e63;
    }

    .magenta {
        background-color: #d81b60;
    }

    .darkgreen {
        background-color: #2e7d32;
    }

    .form-heading {
        background-color: #87CEEB;
        padding: 8px 15px;
        font-weight: bold;
        color: #000;
        border-radius: 4px 4px 0 0;
        margin-bottom: 10px;
    }

    .form-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 10px;
    }

    .form-group-custom,
    .d-flex.align-items-center {
        display: flex;
        align-items: center;
        margin-bottom: 6px;
    }

    .form-control-sm, .form-select-sm {
        width: 230px;
    }

    .form-check-input {
        transform: scale(1.1);
        margin-right: 5px;
    }

    .form-check-label {
        margin-right: 15px;
    }

    .form-section {
        display: none;
        border: 1px solid #ccc;
        padding: 15px;
        background-color: #fff;
    }

    .section-title {
        font-weight: bold;
        margin: 10px 0;
    }

    .col-md-6 table {
        width: 100%;
        table-layout: fixed;
    }

    .col-md-6 th,
    .col-md-6 td {
        word-wrap: break-word;
    }
</style>

<div class="card p-3">
    <h1 class="center-heading">0002 - Mr. Sandip B. Patel</h1>

    <!-- Row 1 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Login ID :</label>
            <input type="text" id="loginid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Alpha Emp Code :</label>
            <input type="text" id="Alpempcodeid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 2 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Branch Name :</label>
            <input type="text" id="branchid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Grade :</label>
            <input type="text" id="gradeid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 3 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Date Of Join :</label>
            <input type="text" id="dateofjoinid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Shift Name :</label>
            <input type="text" id="shiftnameid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 4 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Designation :</label>
            <input type="text" id="desgid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Monthly CTC :</label>
            <input type="text" id="monthCTCid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 5 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Monthly Basic :</label>
            <input type="text" id="monthlybasicid" form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Monthly Gross :</label>
            <input type="text" id="monthlyGrossid" class="form-control form-control-sm" style="width: 230px;">
        </div>

    </div>

    <!-- Row 6 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Department :</label>
            <input type="text" id="depatid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Enroll No :</label>
            <input type="text" id="enrollnoid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 7 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Employment Type :</label>
            <input type="text" id="employeetypeid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Office E-Mail ID :</label>
            <input type="text" id="mailid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 8 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Category :</label>
            <input type="text" id="categoryid" class="form-control form-control-sm" style="width: 230px;">
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Manager :</label>
            <input type="text" id="mangerid" class="form-control form-control-sm" style="width: 230px;">
        </div>
    </div>

    <!-- Row 9 -->
    <div class="row mb-2 g-3">
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Sub Branch :</label>
            <select class="form-select form-select-sm" style="width: 230px;">
                <option value="">-- Select --</option>
            </select>
        </div>
        <div class="col-md-4 d-flex align-items-center">
            <label class="form-label-fixed mb-0">Salary Cycle :</label>
            <select class="form-select form-select-sm" style="width: 230px;">
                <option value="">-- Select --</option>
            </select>
        </div>
    </div>


    <!-- Personal Information-->

    <div class="icon-container mb-4">
        <div class="icon-item" onclick="openForm('personal-form')">
            <div class="icon-box orange"><i class="fas fa-user"></i></div>
            <div class="icon-label">Personal Information</div>
        </div>

       @*  <div class="icon-item">
            <div class="icon-box orange"><i class="fas fa-user"></i></div>
            <div class="icon-label">Personal Information</div>
        </div>

        <div class="icon-item">
            <div class="icon-box blue"><i class="fas fa-address-book"></i></div>
            <div class="icon-label">Contact</div>
        </div> *@
        <div class="icon-item" onclick="openForm('contact-form-section')">
            <div class="icon-box blue"><i class="fas fa-phone"></i></div>
            <div class="icon-label">Contact</div>
        </div>
        <div class="icon-item" onclick="openForm('EmergencyContact-form')">
            <div class="icon-box red"><i class="fas fa-plus-square"></i></div>
            <div class="icon-label">Emergency Contact(s)</div>
        </div>
        <div class="icon-item" onclick="openForm('Dependents-form')">
            <div class="icon-box purple"><i class="fas fa-people-group"></i></div>
            <div class="icon-label">Dependents</div>
        </div>
        <div class="icon-item" onclick="openForm('Immigration-form')">
            <div class="icon-box pink"><i class="fas fa-plane"></i></div>
            <div class="icon-label">Immigration</div>
        </div>
        <div class="icon-item" onclick="openForm('Asset-License-form')">
            <div class="icon-box red"><i class="fas fa-house-user"></i></div>
            <div class="icon-label">Asset & License</div>
        </div>
        <div class="icon-item" onclick="openForm('Reporting-Contract-form')">
            <div class="icon-box dark"><i class="fas fa-file-contract"></i></div>
            <div class="icon-label">Reporting & Contract</div>
        </div>
        <div class="icon-item" onclick="openForm('Experience-Language-form')">
            <div class="icon-box lime"><i class="fas fa-language"></i></div>
            <div class="icon-label">Experience & Language</div>
        </div>
        <div class="icon-item" onclick="openForm('Qualification-form')">
            <div class="icon-box yellow"><i class="fas fa-award"></i></div>
            <div class="icon-label">Qualification</div>
        </div>
        <div class="icon-item" onclick="openForm('Skill-form')">
            <div class="icon-box green"><i class="fas fa-screwdriver-wrench"></i></div>
            <div class="icon-label">Skills</div>
        </div>
        <div class="icon-item" onclick="openForm('Attachments-form')">
            <div class="icon-box brown"><i class="fas fa-paperclip"></i></div>
            <div class="icon-label">Attachments</div>
        </div>
        <div class="icon-item" onclick="openForm('allowance-form')">
            <div class="icon-box magenta"><i class="fas fa-money-bill-wave"></i></div>
            <div class="icon-label">Allowance</div>
        </div>
        <div class="icon-item" onclick="openForm('salary-form')">
            <div class="icon-box darkgreen"><i class="fas fa-rupee-sign"></i></div>
            <div class="icon-label">Salary</div>
        </div>

    </div>

    @* <div id="partialViewContainer">
        <div id="personal-form" class="partial-section"></div>
        <div id="Contact" class="partial-section d-none"></div>
        <div id="contact-form-section" class="partial-section"></div>
        <div id="EmergencyContact-form" class="form-section"></div>
        <div id="Dependents-form" class="form-section"></div>
        <div id="Immigration-form" class="form-section"></div>
        <div id="Asset-License-form" class="form-section"></div>
        <div id="Reporting-Contract-form" class="form-section"></div>
        <div id="Experience-Language-form" class="form-section"></div>
        <div id="Qualification-form" class="form-section"></div>
        <div id="Skill-form" class="form-section"></div>
        <div id="Attachments-form" class="form-section"></div>
        <div id="allowance-form" class="form-section"></div>
        <div id="salary-form" class="form-section"></div>
    </div> *@

    <div id="partialViewContainer">
        <div id="personal-form" class="partial-section"></div>
        <div id="Contact" class="partial-section d-none"></div>
        <div id="EmergencyContacts" class="partial-section d-none"></div>
        <div id="ReportingContract" class="partial-section d-none"></div>
        <div id="Attachments" class="partial-section d-none"></div>
        <div id="Allowance" class="partial-section d-none"></div>
        <div id="Salary" class="partial-section d-none"></div>
    </div>

    <!-- jQuery Script -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
                loadEmployeeProfile();
            $('#btnShowMore').click(function () {
                var $moreDetailsForm = $('#more-details-form');
                var $btnSubmitPersonal = $('#submit-personal');
                var $btnSubmitMore = $('#submit-more');

                if ($moreDetailsForm.is(':visible')) {
                    $moreDetailsForm.hide();
                    $(this).text('Show');
                    $btnSubmitPersonal.show();
                } else {
                    $moreDetailsForm.show();
                    $(this).text('Hide');
                    $btnSubmitPersonal.hide();
                }
            });

        });

             function openForm(formId)
             {
                debugger;
                OpenPartialView(formId); // use correct parameter
                $('.form-section').hide();
                $('#' + formId).show();
            }


                    function OpenPartialView(formId) {
                let viewName = '';

                switch (formId) {
                            case 'personal-form': viewName = 'PersonalInfo'; break;
                        case 'contact-form-section': viewName = 'Contact'; break;
                        case 'EmergencyContact-form': viewName = 'EmergencyContact'; break;
                        case 'Dependents-form': viewName = 'Dependents'; break;
                            case 'Immigration-form': viewName = 'Immigration'; break;
                    case 'Asset-License-form': viewName = 'AssetLicense'; break;
                    case 'Reporting-Contract-form': viewName = 'ReportingContract'; break;
                    case 'Experience-Language-form': viewName = 'ExperienceLanguage'; break;
                    case 'Qualification-form': viewName = 'Qualification'; break;
                    case 'Skill-form': viewName = 'Skill'; break;
                    case 'Attachments-form': viewName = 'Attachments'; break;
                    case 'allowance-form': viewName = 'Allowance'; break;
                    case 'salary-form': viewName = 'Salary'; break;
                    default: viewName = ''; break;
                }

                if (viewName !== '') {
                    $.ajax({
                            url: '@UIBaseUrl/EmployeePanel/PartialView/' + viewName,
                        type: 'GET',
                        success: function (html) {
                            $('#' + formId).html(html);
                        },
                        error: function () {
                            $('#' + formId).html('<div class="text-danger">Error loading view.</div>');
                        }
                    });
                }
            }
                function loadEmployeeProfile() {
                const savedCompany = localStorage.getItem('selectedCompany');
                var companyDetails = JSON.parse(savedCompany);
                const companyId = companyDetails.CompanyId;
                const employeeId = localStorage.getItem('EmployeeId');
                const token = localStorage.getItem("authToken");

                if (!companyId) {
                    round_error_noti("Please select company");
                    return;
                }
                if (!employeeId) {
                    round_error_noti("Employee ID not found");
                    return;
                }
                $.ajax({
                    url: '@baseUrl/MyProfileAPI/GetMyProfileWithEmp',
                    method: 'GET',
                    data: { companyId: companyId, employeeId: employeeId },
                    headers: {
                        "Authorization": "Bearer " + token
                    },
                    success: function (data) {
                        if (data.isSuccess) {
                            let emp = data.data[0];
                            $('#loginid').val(emp.loginAlias);
                            $('#Alpempcodeid').val(emp.employeeCode);
                            $('#branchid').val(emp.branchName);
                            $('#gradeid').val(emp.gradeName);
                            $('#dateofjoinid').val(emp.dateOfJoining);
                            $('#shiftnameid').val(emp.shiftName);
                            $('#desgid').val(emp.designationName);
                            $('#monthCTCid').val(emp.monthlyCTC);
                            $('#monthlybasicid').val(emp.monthlyBasic);
                            $('#monthlyGrossid').val(emp.monthlyGross);
                            $('#depatid').val(emp.departmentName);
                            $('#enrollnoid').val(emp.enrollNo);
                            $('#mailid').val(emp.employeeTypeName);
                            $('#employeetypeid').val(emp.email);
                            $('#categoryid').val(emp.categoryName);
                            $('#mangerid').val(emp.reportingManagerName);
                        } else {
                            round_error_noti(data.responseMessage);
                        }
                    },
                    error: function (err) {
                        console.error("Error fetching employee profile: ", err);
                    }
                });
            } // end of function

                     const tabMap = {
            "personal-form": "@Url.Action("PersonalInfo", "PartialView")",
            "Contact": "@Url.Action("Contact", "PartialView")",
        };

        $(document).ready(function () {
            // Load all partial views on page load
            for (let key in tabMap) {
                $('#' + key).html('<div class="text-center p-3"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>');
                $.get(tabMap[key], function (response) {
                    $('#' + key).html(response);
                });
            }

            // Handle tab click
            $('.icon-item').on('click', function (e) {
                e.preventDefault();

                $('.icon-item').removeClass('active');
                $(this).addClass('active');

                let text = $(this).text().trim();
                let idMap = {
                    "Personal Information": "personal-form",
                    "Contact": "Contact"   // ✅ Fixed (no underscore)
                };

                let targetId = idMap[text];
                if (!targetId) return;

                $('.partial-section').addClass('d-none');
                $('#' + targetId).removeClass('d-none');
            });
        });


            $(document).ready(function () {
              $('#viewEmployeeHistroy').on('click', function () {
                const baseUIOrginUrl = window.location.origin;
                window.location.href = baseUIOrginUrl + '/EmployeeMaster/EmployeeHistory';

              });
            });


    </script>


</div>