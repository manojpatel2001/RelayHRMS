@inject IConfiguration Configuration
@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Areas/AdminPanel/Views/Shared/_AdminLayout.cshtml";
    string baseUrl = Configuration["BaseUrlSettings:baseUrl"];
    var uri = new Uri(baseUrl);
    string baseDomainUrl = $"{uri.Scheme}://{uri.Host}:{uri.Port}";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Dashboard Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
    <link href="https://cdn3.devexpress.com/jslib/23.2.3/css/dx.light.css" rel="stylesheet" />

    <style>

    </style>
</head>

<body>
    <div style="height: 800px;">
        <div class="container-fluid">
            <div class="row">
                <!-- Left Content -->
                <div class="col-lg-9">
                    <div class="row">
                        <!-- Row 1 -->
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Application Status</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Leave Application <span class="red-count">(3)</span></a>
                                    <a href="#" class="dashboard-link">Leave Cancellation <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Comp Off Application <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Pre Comp Off Application <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Loan Application <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Claim Application <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Attendance Regularization <span class="red-count">(1)</span></a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Quick Data</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Yearly Holiday</a>
                                    <a href="#" class="dashboard-link">Company Consolidate Info</a>
                                    <a href="#" class="dashboard-link">Active/InActive Users <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Active/InActive Mobile Users <span class="red-count">(3)</span></a>
                                    <a href="#" class="dashboard-link">Allowance/Reim Application <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Scheme Not Assigned</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Graphics Report</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Leave Reports</a>
                                    <a href="#" class="dashboard-link">View Message</a>
                                    <a href="#" class="dashboard-link">Yearly Salary</a>
                                    <a href="#" class="dashboard-link">WhosOff</a>
                                    <a href="#" class="dashboard-link">View Graphical Report</a>
                                    <a href="#" class="dashboard-link">Continues Absent</a>
                                </div>
                            </div>
                        </div>

                        <!-- Row 2 -->
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Other Details</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Insurance Reminder <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">IT Declaration History</a>
                                    <a href="#" class="dashboard-link">Survey</a>
                                    <a href="#" class="dashboard-link">Today's Attendance</a>
                                    <a href="#" class="dashboard-link">Compoff Lapse Reminder</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Deputation/Contract</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Deputation Over <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Contract Over <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Probation/Trainee Over <span class="red-count">(1)</span></a>
                                    <a href="#" class="dashboard-link">Retirement Over <span class="red-count">(0)</span></a>
                                    <a href="#" class="dashboard-link">Document Expiry Reminder</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="dashboard-card">
                                <div class="dashboard-header">Leave Data</div>
                                <div class="dashboard-body">
                                    <a href="#" class="dashboard-link">Leave/OD Status</a>
                                    <a href="#" class="dashboard-link">Leave Carry Forward</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grid Below All Cards -->
                    <div class="dashboard-grid-container">
                        <div class="dashboard-header">Employees Detail</div>
                        @*            <div id="rowCount" class="text-end text-muted mt-1 me-2" style="font-size: 13px;"></div> *@
                        <div id="employeeGrid" class="p-2"></div>
                    </div>
                </div>

                <!-- Right Panel -->
                <div class="col-lg-3 mt-2">
                    <div class="panel-wrapper position-relative">
                        <div class="side-panel">
                            <a href="#" class="item active">Today's Attendance</a>
                            <a href="#" class="item">Birthday & Anniversary Reminder</a>
                            <a href="#" class="item">Add & View Events</a>
                            <a href="#" class="item">Message Board</a>
                            <a href="#" class="item">New Joining Details</a>
                            <a href="#" class="item">Wall Of Fame</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>

        $(document).ready(function () {
            BranchData();
        });

        function BranchData() {
            debugger;
            $.ajax({
                type: "GET",
                 url: '@baseDomainUrl/api/BranchAPI/GetBranchWiseEmpCount',
                success: function (data) { arguments
                    if (data.isSuccess && data.data.length > 0) {
                        $("#employeeGrid").dxDataGrid({
                            dataSource: data.data,
                            columns: [
                                { dataField: 'branchName', caption: 'Branch', alignment: 'center' },
                                { dataField: 'totalUsers', caption: 'Total', alignment: 'center' },
                                { dataField: 'joinLastMonth', caption: 'Join (Last Month)', alignment: 'center' },
                                { dataField: 'leftLastMonth', caption: 'Left (Last Month)', alignment: 'center' }
                            ],
                            showBorders: true,
                            columnAutoWidth: true,
                            paging: { pageSize: 10 },
                            pager: {
                                showPageSizeSelector: true,
                                allowedPageSizes: [10, 25, 50, 100],
                                showInfo: true
                            },
                            filterRow: { visible: true, applyFilter: "auto" },
                            headerFilter: { visible: true },
                            groupPanel: { visible: true },
                            searchPanel: { visible: true, width: 240, placeholder: "Search..." },
                            summary: {
                                totalItems: [
                                    { column: "branchName", summaryType: "count", displayFormat: "Total" },
                                    { column: "totalUsers", summaryType: "sum" },
                                    { column: "joinLastMonth", summaryType: "sum" },
                                    { column: "leftLastMonth", summaryType: "sum" }
                                ]
                            },
                                 onContentReady(e) {
            const totalRecords = e.component.option("dataSource").length;
            $('#rowCount').html('Total Records: ' + totalRecords);
        }
                        });
                    } else {
                        DevExpress.ui.notify("No data found.", "warning", 3000);
                    }
                },
                error: function (xhr, status, error) {
                    DevExpress.ui.notify("Error fetching data: " + status, "error", 3000);
                    console.error("AJAX Error: ", error);
                }
            });
        }
    </script>
</body>
</html>
