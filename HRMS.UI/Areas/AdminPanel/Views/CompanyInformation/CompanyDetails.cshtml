@inject IConfiguration Configuration
@{
	ViewData["Title"] = "Additional Information";
    Layout = "~/Areas/AdminPanel/Views/Shared/_AdminLayout.cshtml";
	string baseUrl = Configuration["BaseUrlSettings:baseUrl"];
	var uri = new Uri(baseUrl);
	string baseDomainUrl = $"{uri.Scheme}://{uri.Host}:{uri.Port}";
}
<style>
    .modal-fullscreen {
        max-width: 90%;
        width: 90%;
        height: 90%;
        margin: 2% 4% 4% 4%;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 4px !important;
        
    }

    .modal-content 
    {
        height: 100%;
        overflow-y: auto;
        border-radius: 4px !important;
    }

    .modal-header, .modal-footer {
        flex: 0 0 auto;
    }

    .modal-body {
        padding: 20px;
    }

    /* Tooltip button styles */
    .tooltip-button {
        background-color: blue;
        color: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
    }

    /* Tooltip styles */
    .tooltip-text {
        display: none;
        position: absolute;
        background-color: #ffffe0;
        border: 1px solid #ccc;
        padding: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        width: 250px;
        bottom: 100%; /* Position above the button */
        right: 0; /* Align with the button */
        margin-bottom: 10px; /* Add some space between the button and the tooltip */
    }

        .tooltip-button:hover + .tooltip-text,
        .tooltip-text:hover {
            display: block;
        }


</style>


<div class="card">
    <div class="card-header bg-transparent ml-0 py-0">
        <div class="row">
            <div class="col-6">
                <h6 class="pt-2 mb-0">
                    Company Details
                </h6>
            </div>

            <div class="col-6 d-flex justify-content-end align-items-center">
                <div class="font-22 pl-2" style="color:#32393f; cursor:pointer;">
                    <i class="fadeIn animated bx bx-refresh" id="refreshData" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-title="Refresh Data"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-12 btn-heading-title">
                <div class="input-group mb-2">
                    <button id="AddCompanyDetails"
                            type="button"
                            class="btn mr-1 rounded-1"
                            style="background-color:#2395c6; color:white;">
                        Add Company Details
                    </button>
                </div>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-md-12">
                <div class="form-group">
                    <div class="rowCount" id="rowCountCompanyDetails"></div>
                    <div id="gridContainerCompanyDetails">

                        <div class="d-flex justify-content-center align-items-center" style="height: 10vh;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="modal fade" id="addCompanyDetailsModal" tabindex="-1" aria-labelledby="addCompanyDetailsLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title btn-heading-title" id="addCompanyDetailsLabel">Company Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <div class="row">

                    <!-- Left side: 8 columns -->
                    <div class="col-md-8 border-end mb-3 pe-4">
                        <h6 class="btn-heading-title bg-secondary text-white p-2 mb-3"><span class="compnayFormType">Add</span> Company Details</h6>

                        <div class="row mb-3 gy-3">

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtcompanyName" placeholder="Company Name" />
                                    <label class="floating-label" for="txtcompanyName">Company Name *</label>
                                    <span id="spncompanyName" style="color:red; display:none;">Please Enter Company Name</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <textarea class="form-control floating-input" id="txtcompanyAddress" rows="1" placeholder="Company Address"></textarea>
                                    <label class="floating-label" for="txtcompanyAddress">Company Address *</label>
                                    <span id="spncompanyAddress" style="color:red; display:none;">Please Enter Company Address</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <select class="form-select floating-input" id="txtcity">
                                        <option value="" selected disabled>Select City</option>
                                        
                                    </select>
                                    <label class="floating-label" for="txtcity">City *</label>
                                    <span id="spncity" style="color:red; display:none;">Please Select City</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <select class="form-select floating-input" id="txtstate">
                                        <option value="" selected disabled>Select State</option>
                                        
                                    </select>
                                    <label class="floating-label" for="txtstate">State *</label>
                                    <span id="spnstate" style="color:red; display:none;">Please Select State</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtpinCode">
                                    <label class="floating-label" for="txtpinCode">Pin Code *</label>
                                    <span id="spnpinCode" style="color:red; display:none;">Please Enter Pin Code</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    
                                    <select class="form-select floating-input" id="txtcountry">
                                        <option selected value="">Select Country</option>
                                        <option value="3">AFGHANISTAN</option>
                                        <option value="4">ALAND ISLANDS</option>
                                        <option value="5">ALBANIA</option>
                                        <option value="6">ALGERIA</option>
                                        <option value="7">AMERICAN SAMOA</option>
                                        <option value="8">ANDORRA</option>
                                        <option value="9">ANGOLA</option>
                                        <option value="10">ANGUILLA</option>
                                        <option value="11">ANTARCTICA</option>
                                        <option value="12">ANTIGUA AND BARBUDA</option>
                                        <option value="13">ARGENTINA</option>
                                        <option value="14">ARMENIA</option>
                                        <option value="15">ARUBA</option>
                                        <option value="16">AUSTRALIA</option>
                                        <option value="17">AUSTRIA</option>
                                        <option value="18">AZERBAIJAN</option>
                                        <option value="19">BAHAMAS</option>
                                        <option value="20">BAHRAIN</option>
                                        <option value="21">BARBADOS</option>
                                        <option value="22">BELARUS</option>
                                        <option value="23">BELGIUM</option>
                                        <option value="24">BELIZE</option>
                                        <option value="25">BENIN</option>
                                        <option value="26">BERMUDA</option>
                                        <option value="27">BHUTAN</option>
                                        <option value="28">BOLIVIA, PLURINATIONAL STATE OF</option>
                                        <option value="29">BONAIRE, SINT EUSTATIUS AND SABA</option>
                                        <option value="30">BOSNIA AND HERZEGOVINA</option>
                                        <option value="31">BOTSWANA</option>
                                        <option value="32">BOUVET ISLAND</option>
                                        <option value="33">BRAZIL</option>
                                        <option value="34">BRITISH INDIAN OCEAN TERRITORY</option>
                                        <option value="35">BRUNEI DARUSSALAM</option>
                                        <option value="36">BULGARIA</option>
                                        <option value="37">BURKINA FASO</option>
                                        <option value="38">BURUNDI</option>
                                        <option value="39">CAMBODIA</option>
                                        <option value="40">CAMEROON</option>
                                        <option value="41">CANADA</option>
                                        <option value="42">CAPE VERDE</option>
                                        <option value="43">CAYMAN ISLANDS</option>
                                        <option value="44">CENTRAL AFRICAN REPUBLIC</option>
                                        <option value="45">CHAD</option>
                                        <option value="46">CHILE</option>
                                        <option value="47">CHINA</option>
                                        <option value="48">CHRISTMAS ISLAND</option>
                                        <option value="49">COCOS (KEELING) ISLANDS</option>
                                        <option value="50">COLOMBIA</option>
                                        <option value="51">COMOROS</option>
                                        <option value="52">CONGO</option>
                                        <option value="53">CONGO, THE DEMOCRATIC REPUBLIC OF THE</option>
                                        <option value="54">COOK ISLANDS</option>
                                        <option value="55">COSTA RICA</option>
                                        <option value="56">CÔTE D'IVOIRE</option>
                                        <option value="57">CROATIA</option>
                                        <option value="58">CUBA</option>
                                        <option value="59">CURAÇAO</option>
                                        <option value="60">CYPRUS</option>
                                        <option value="61">CZECH REPUBLIC</option>
                                        <option value="62">DENMARK</option>
                                        <option value="63">DJIBOUTI</option>
                                        <option value="64">DOMINICA</option>
                                        <option value="65">DOMINICAN REPUBLIC</option>
                                        <option value="66">ECUADOR</option>
                                        <option value="67">EGYPT</option>
                                        <option value="68">EL SALVADOR</option>
                                        <option value="69">EQUATORIAL GUINEA</option>
                                        <option value="70">ERITREA</option>
                                        <option value="71">ESTONIA</option>
                                        <option value="72">ETHIOPIA</option>
                                        <option value="73">FALKLAND ISLANDS (MALVINAS)</option>
                                        <option value="74">FAROE ISLANDS</option>
                                        <option value="75">FIJI</option>
                                        <option value="76">FINLAND</option>
                                        <option value="77">FRANCE</option>
                                        <option value="78">FRENCH GUIANA</option>
                                        <option value="79">FRENCH POLYNESIA</option>
                                        <option value="80">FRENCH SOUTHERN TERRITORIES</option>
                                        <option value="81">GABON</option>
                                        <option value="82">GAMBIA</option>
                                        <option value="83">GEORGIA</option>
                                        <option value="84">GERMANY</option>
                                        <option value="85">GHANA</option>
                                        <option value="86">GIBRALTAR</option>
                                        <option value="87">GREECE</option>
                                        <option value="88">GREENLAND</option>
                                        <option value="89">GRENADA</option>
                                        <option value="90">GUADELOUPE</option>
                                        <option value="91">GUAM</option>
                                        <option value="92">GUATEMALA</option>
                                        <option value="93">GUERNSEY</option>
                                        <option value="94">GUINEA</option>
                                        <option value="95">GUINEA-BISSAU</option>
                                        <option value="96">GUYANA</option>
                                        <option value="97">HAITI</option>
                                        <option value="98">HEARD ISLAND AND MCDONALD ISLANDS</option>
                                        <option value="99">HOLY SEE (VATICAN CITY STATE)</option>
                                        <option value="100">HONDURAS</option>
                                        <option value="101">HONG KONG</option>
                                        <option value="102">HUNGARY</option>
                                        <option value="103">ICELAND</option>
                                        <option value="1">INDIA</option>
                                        <option value="104">INDONESIA</option>
                                        <option value="105">IRAN, ISLAMIC REPUBLIC OF</option>
                                        <option value="106">IRAQ</option>
                                        <option value="107">IRELAND</option>
                                        <option value="108">ISLE OF MAN</option>
                                        <option value="109">ISRAEL</option>
                                        <option value="110">ITALY</option>
                                        <option value="111">JAMAICA</option>
                                        <option value="112">JAPAN</option>
                                        <option value="113">JERSEY</option>
                                        <option value="114">JORDAN</option>
                                        <option value="115">KAZAKHSTAN</option>
                                        <option value="116">KENYA</option>
                                        <option value="117">KIRIBATI</option>
                                        <option value="118">KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF</option>
                                        <option value="119">KOREA, REPUBLIC OF</option>
                                        <option value="120">KUWAIT</option>
                                        <option value="121">KYRGYZSTAN</option>
                                        <option value="122">LAO PEOPLE'S DEMOCRATIC REPUBLIC</option>
                                        <option value="123">LATVIA</option>
                                        <option value="124">LEBANON</option>
                                        <option value="125">LESOTHO</option>
                                        <option value="126">LIBERIA</option>
                                        <option value="127">LIBYA</option>
                                        <option value="128">LIECHTENSTEIN</option>
                                        <option value="129">LITHUANIA</option>
                                        <option value="130">LUXEMBOURG</option>
                                        <option value="131">MACAO</option>
                                        <option value="132">MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF</option>
                                        <option value="133">MADAGASCAR</option>
                                        <option value="134">MALAWI</option>
                                        <option value="135">MALAYSIA</option>
                                        <option value="136">MALDIVES</option>
                                        <option value="137">MALI</option>
                                        <option value="138">MALTA</option>
                                        <option value="139">MARSHALL ISLANDS</option>
                                        <option value="140">MARTINIQUE</option>
                                        <option value="141">MAURITANIA</option>
                                        <option value="142">MAURITIUS</option>
                                        <option value="143">MAYOTTE</option>
                                        <option value="144">MEXICO</option>
                                        <option value="145">MICRONESIA, FEDERATED STATES OF</option>
                                        <option value="146">MOLDOVA, REPUBLIC OF</option>
                                        <option value="147">MONACO</option>
                                        <option value="148">MONGOLIA</option>
                                        <option value="149">MONTENEGRO</option>
                                        <option value="150">MONTSERRAT</option>
                                        <option value="151">MOROCCO</option>
                                        <option value="152">MOZAMBIQUE</option>
                                        <option value="153">MYANMAR</option>
                                        <option value="154">NAMIBIA</option>
                                        <option value="155">NAURU</option>
                                        <option value="156">NEPAL</option>
                                        <option value="157">NETHERLANDS</option>
                                        <option value="158">NEW CALEDONIA</option>
                                        <option value="159">NEW ZEALAND</option>
                                        <option value="160">NICARAGUA</option>
                                        <option value="161">NIGER</option>
                                        <option value="162">NIGERIA</option>
                                        <option value="163">NIUE</option>
                                        <option value="164">NORFOLK ISLAND</option>
                                        <option value="165">NORTHERN MARIANA ISLANDS</option>
                                        <option value="166">NORWAY</option>
                                        <option value="167">OMAN</option>
                                        <option value="2">PAKISTAN</option>
                                        <option value="168">PALAU</option>
                                        <option value="169">PALESTINE, STATE OF</option>
                                        <option value="170">PANAMA</option>
                                        <option value="171">PAPUA NEW GUINEA</option>
                                        <option value="172">PARAGUAY</option>
                                        <option value="173">PERU</option>
                                        <option value="174">PHILIPPINES</option>
                                        <option value="175">PITCAIRN</option>
                                        <option value="176">POLAND</option>
                                        <option value="177">PORTUGAL</option>
                                        <option value="178">PUERTO RICO</option>
                                        <option value="179">QATAR</option>
                                        <option value="180">RÉUNION</option>
                                        <option value="181">ROMANIA</option>
                                        <option value="182">RUSSIAN FEDERATION</option>
                                        <option value="183">RWANDA</option>
                                        <option value="184">SAINT BARTHÉLEMY</option>
                                        <option value="185">SAINT HELENA, ASCENSION AND TRISTAN DA CUNHA</option>
                                        <option value="186">SAINT KITTS AND NEVIS</option>
                                        <option value="187">SAINT LUCIA</option>
                                        <option value="188">SAINT MARTIN (FRENCH PART)</option>
                                        <option value="189">SAINT PIERRE AND MIQUELON</option>
                                        <option value="190">SAINT VINCENT AND THE GRENADINES</option>
                                        <option value="191">SAMOA</option>
                                        <option value="192">SAN MARINO</option>
                                        <option value="193">SAO TOME AND PRINCIPE</option>
                                        <option value="194">SAUDI ARABIA</option>
                                        <option value="195">SENEGAL</option>
                                        <option value="196">SERBIA</option>
                                        <option value="197">SEYCHELLES</option>
                                        <option value="198">SIERRA LEONE</option>
                                        <option value="199">SINGAPORE</option>
                                        <option value="200">SINT MAARTEN (DUTCH PART)</option>
                                        <option value="201">SLOVAKIA</option>
                                        <option value="202">SLOVENIA</option>
                                        <option value="203">SOLOMON ISLANDS</option>
                                        <option value="204">SOMALIA</option>
                                        <option value="205">SOUTH AFRICA</option>
                                        <option value="206">SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS</option>
                                        <option value="207">SOUTH SUDAN</option>
                                        <option value="208">SPAIN</option>
                                        <option value="209">SRI LANKA</option>
                                        <option value="210">SUDAN</option>
                                        <option value="211">SURINAME</option>
                                        <option value="212">SVALBARD AND JAN MAYEN</option>
                                        <option value="213">SWAZILAND</option>
                                        <option value="214">SWEDEN</option>
                                        <option value="215">SWITZERLAND</option>
                                        <option value="216">SYRIAN ARAB REPUBLIC</option>
                                        <option value="217">TAIWAN, PROVINCE OF CHINA</option>
                                        <option value="218">TAJIKISTAN</option>
                                        <option value="219">TANZANIA, UNITED REPUBLIC OF</option>
                                        <option value="220">THAILAND</option>
                                        <option value="221">TIMOR-LESTE</option>
                                        <option value="222">TOGO</option>
                                        <option value="223">TOKELAU</option>
                                        <option value="224">TONGA</option>
                                        <option value="225">TRINIDAD AND TOBAGO</option>
                                        <option value="226">TUNISIA</option>
                                        <option value="227">TURKEY</option>
                                        <option value="228">TURKMENISTAN</option>
                                        <option value="229">TURKS AND CAICOS ISLANDS</option>
                                        <option value="230">TUVALU</option>
                                        <option value="231">UGANDA</option>
                                        <option value="232">UKRAINE</option>
                                        <option value="233">UNITED ARAB EMIRATES</option>
                                        <option value="234">UNITED STATES</option>
                                        <option value="235">UNITED STATES MINOR OUTLYING ISLANDS</option>
                                        <option value="236">URUGUAY</option>
                                        <option value="237">UZBEKISTAN</option>
                                        <option value="238">VANUATU</option>
                                        <option value="239">VENEZUELA, BOLIVARIAN REPUBLIC OF</option>
                                        <option value="240">VIET NAM</option>
                                        <option value="241">VIRGIN ISLANDS, BRITISH</option>
                                        <option value="242">VIRGIN ISLANDS, U.S.</option>
                                        <option value="243">WALLIS AND FUTUNA</option>
                                        <option value="244">WESTERN SAHARA</option>
                                        <option value="245">YEMEN</option>
                                        <option value="246">ZAMBIA</option>
                                        <option value="247">ZIMBABWE</option>

                                    </select>
                                    <label class="floating-label" for="txtcountry">Country</label>
                                    <span id="spncountry" style="color:red; display:none;">Please Select Country</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtphoneNo" placeholder="Phone No">
                                    <label class="floating-label" for="txtphoneNo">Phone No</label>
                                    <span id="spnphoneNo" style="color:red; display:none;">Please Enter Phone No</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="email" class="form-control floating-input" id="txtemailAddress" placeholder="Email Address">
                                    <label class="floating-label" for="txtemailAddress">Email Address</label>
                                    <span id="spnemailAddress" style="color:red; display:none;">Please Enter Email Address</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <select class="form-select floating-input" id="txtdateFormat">
                                        <option selected>dd/MM/yyyy</option>
                                        <option>MM/dd/yyyy</option>
                                        <option>yyyy-MM-dd</option>
                                    </select>
                                    <label class="floating-label" for="txtdateFormat">Date Format</label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="date" class="form-control floating-input" id="txtfromDate">
                                    <label class="floating-label" for="txtfromDate">From Date *</label>
                                    <span id="spnfromDate" style="color:red; display:none;">Please Enter From Date</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtwebsite" placeholder="Enter Website">
                                    <label class="floating-label" for="txtwebsite">Website</label>
                                    <span id="spnwebsite" style="color:red; display:none;">Please Enter Website</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtpfTrustNo" placeholder="Enter PF Trust No">
                                    <label class="floating-label" for="txtpfTrustNo">PF Trust No</label>
                                    <span id="spnpfTrustNo" style="color:red; display:none;">Please Enter PF Trust No</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative form-check">
                                    <input type="checkbox" class="form-check-input" id="txtpfApplicable">
                                    <label class="form-check-label" for="txtpfApplicable">PF Applicable</label>
                                </div>
                            </div>
                            <div class="col-md-4 tagPFNo " style="display:none;">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtPFNo" placeholder="Enter PF Trust No">
                                    <label class="floating-label" for="txtPFNo">PF No</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group position-relative form-check">
                                    <input type="checkbox" class="form-check-input" id="txtesicApplicable">
                                    <label class="form-check-label" for="txtesicApplicable">ESIC Applicable</label>
                                </div>
                            </div>
                            <div class="col-md-4 tagESICNo " style="display:none;">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtESICNo" placeholder="Enter PF Trust No">
                                    <label class="floating-label" for="txtESICNo">ESIC No</label>
                                </div>
                            </div>
                          

                            
                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txttanNo" placeholder="TAN No">
                                    <label class="floating-label" for="txttanNo">TAN No</label>
                                    <span id="spntanNo" style="color:red; display:none;">Please Enter TAN No</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtpanNo" placeholder="eg. AABBC1234D">
                                    <label class="floating-label" for="txtpanNo">PAN No</label>
                                    <span id="spnpanNo" style="color:red; display:none;">Please Enter PAN No</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtdomainName" placeholder="@@demo.com">
                                    <label class="floating-label" for="txtdomainName">Domain Name *</label>
                                    <span id="spndomainName" style="color:red; display:none;">Please Enter Domain Name</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtcompanyCode" placeholder="Company Code">
                                    <label class="floating-label" for="txtcompanyCode">Company Code</label>
                                    <span id="spncompanyCode" style="color:red; display:none;">Please Enter Company Code</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="txtlwfNo" placeholder="LWF No">
                                    <label class="floating-label" for="txtlwfNo">LWF No</label>
                                    <span id="spnlwfNo" style="color:red; display:none;">Please Enter LWF No</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    Employee Code Setting:
                                    <label class=" cursor-pointer text-primary ms-2" data-bs-toggle="modal" data-bs-target="#employeeCodeSettingModal">
                                        Click here
                                    </label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="number" class="form-control floating-input" id="txtinOutDuration" placeholder="In-Out Duration (in Sec)">
                                    <label class="floating-label" for="txtinOutDuration">In-Out Duration (in Sec)</label>
                                    <span id="spninOutDuration" style="color:red; display:none;">Please Enter In-Out Duration</span>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative form-check">
                                    <input type="checkbox" class="form-check-input" id="txthierarchyDesignation">
                                    <label class="form-check-label" for="txthierarchyDesignation">Reporting Hierarchy Designation wise</label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <select class="form-select floating-input" id="txtemployeeLicense">
                                        <option selected disabled value="">Select Employee License</option>
                                        <option value="1000">1000</option>
                                        <option value="2000">2000</option>
                                        <option value="3000">3000</option>
                                        <!-- Add more options as needed -->
                                    </select>
                                    <label class="floating-label" for="txtemployeeLicense">Employee License</label>
                                 
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group  position-relative">
                                    E-mail Signature:
                                    <label class=" cursor-pointer text-primary ms-2" data-bs-toggle="modal" data-bs-target="#emailSignatureModal">
                                        Click here
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group position-relative form-check">
                                    <input type="checkbox" class="form-check-input" id="txtcontractorCompany">
                                    <label class="form-check-label" for="txtcontractorCompany">Contractor Company</label>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    Other Detail:
                                    <label class=" cursor-pointer text-primary ms-2 otherDetailModal" data-bs-toggle="modal" data-bs-target="#otherDetailModal">
                                        Click here
                                    </label>
                                </div>
                            </div>

                            
                            <div class="col-md-4 ">
                                <div class="form-group position-relative mt-2 form-check">
                                    <input type="checkbox" class="form-check-input" id="txtdigitalSignature">
                                    <label class="form-check-label" for="txtdigitalSignature">Digital Signature</label>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group position-relative">
                                    <label class="form-check-label"><strong>Select WeekOff Day: </strong></label>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Monday" id="alternateWeekOffDayMonday">
                                        <label class="form-check-label" for="alternateWeekOffDayMonday">Monday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Tuesday" id="alternateWeekOffDayTuesday">
                                        <label class="form-check-label" for="alternateWeekOffDayTuesday">Tuesday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Wednesday" id="alternateWeekOffDayWednesday">
                                        <label class="form-check-label" for="alternateWeekOffDayWednesday">Wednesday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Thursday" id="alternateWeekOffDayThursday">
                                        <label class="form-check-label" for="alternateWeekOffDayThursday">Thursday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Friday" id="alternateWeekOffDayFriday">
                                        <label class="form-check-label"  for="alternateWeekOffDayFriday">Friday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Saturday" id="alternateWeekOffDaySaturday">
                                        <label class="form-check-label" for="alternateWeekOffDaySaturday">Saturday</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input type="checkbox" class="form-check-input alternateWeekOffDay" value="Sunday" id="alternateWeekOffDaySunday">
                                        <label class="form-check-label" for="alternateWeekOffDaySunday">Sunday</label>
                                    </div>
                                </div>
                             </div>
                            <div class="col-md-4">
                                <div class="form-group position-relative ">
                                    <select class="form-control floating-input" id="alternateWeekOffDay">
                                        <option value="">Select Alternate WeekOff Day</option>
                                        <option value="Monday">Monday</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                        <option value="Saturday">Saturday</option>
                                        <option value="Sunday">Sunday</option>
                                    </select>
                                    <label class="floating-label" for="alternateWeekOffDay">Alternate WeekOff Day </label>
                                </div>
                              </div>
                            <div class="col-md-4">
                                <div class="form-group position-relative">
                                    <input type="text" class="form-control floating-input" id="alternateFullWeekOff" placeholder="eg. #2#4#">
                                    <label class="floating-label" for="alternateFullWeekOff">Alternate Full WeekOff *</label>
                                    <button class="tooltip-button" id="tooltipButton" tabindex="0">?</button>
                                    <div class="tooltip-text" tabindex="0">
                                        When you select Alternate WeekOff Day then Alternate WeekOff Week is mandatory. Specify the Alternate WeekOff Week number separated by # character (i.e. for Second & Fourth WeekOff enter value #2#4#)
                                    </div>
                                </div>
                            </div>

                        </div>
                        <hr class="mb-2"/>
                        <div class="row mb-2">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                                <button type="button" class="btn btn-primary px-5 " id="btnAddCompanyDetails" style="background-color:#2395c6; color:white;">Add</button>
                            </div>
                            <div class="col-md-4"></div>
                        </div>
                    </div>

                    <!-- Right side: 4 columns -->
                    <div class="col-md-4 ps-4 text-center mx-auto">
                        <div class="row p-0">
                           <div class="col-md-12 p-0">
                            <h6 class="btn-heading-title bg-secondary text-white p-2 mb-3">Add Company Logo</h6>

                            <!-- Preview Box -->
                            <div class="mb-3">
                                <img src="@baseDomainUrl/uploads/defaultuserprofile/defaultlogo.jpg"
                                     id="previewLogo"
                                     alt="Logo Preview"
                                     class="img-fluid border border-secondary rounded"
                                     style="max-height: 200px;" />
                            </div>

                            <!-- File Input -->
                            <div class="mb-3">
                                <input class="form-control" type="file" id="companyLogo" accept=".jpg,image/jpeg">
                            </div>

                       
                            <!-- Checkbox -->
                            <div class="mb-1">
                                <div class="form-check d-inline-block">
                                    <input type="checkbox" class="form-check-input" id="displayLogin">
                                    <label class="form-check-label" for="displayLogin">Display on login screen</label>
                                </div>
                            </div>
                            <!-- JPG Only Label -->
                            <div class="mb-2">
                                <span class="text-muted">(Only JPG)</span>
                            </div>

                            <!-- Upload Button -->
                            <div class="mb-3">
                                    <button class="btn btn-primary d-none" style="background-color:#2395c6; color:white;" id="btnChangeLogo">Change Logo</button>
                            </div>
                        </div>
                        
                            <div class="col-md-12 p-0">
                                <h6 class="btn-heading-title bg-secondary text-white p-2 mb-3">Letter Head</h6>
                                <div class="mb-2">
                                    <span class="text-muted">
                                        (Preferred File Resolution Is 800 * 150 Pixels)
                                    </span>
                                </div>
                                <div class="mb-3">
                                    <button class="btn btn-primary " data-bs-toggle="modal" data-bs-target="#addLetterHeadModel" style="background-color:#2395c6; color:white;" id="btnUploadLetterHead">Upload Letter Head</button>
                                </div>
                            </div>
                            <div class="col-md-12 p-0 tagDigitalSignature" style="display:none;">
                                <h6 class="btn-heading-title bg-secondary text-white p-2 mb-3">Digital Signature</h6>
                                <div class="mb-1">
                                    <input class="form-control" type="file" id="digitalSignature" accept=".pfx">
                                </div>

                                <div class="mb-2">
                                    <span class="text-muted">(Only PFX)</span>
                                </div>

                                <div class="mb-2">
                                    <div class="form-group position-relative">
                                        <input type="text" class="form-control floating-input" id="signaturePassword" placeholder="LWF No">
                                        <label class="floating-label" for="signaturePassword">Password</label>
                                        <span id="spnSignaturePassword" style="color:red; display:none;">Please Enter Passowrd</span>
                                    </div>
                                </div>


                                <div class="mb-3">
                                    <button class="btn btn-primary " style="background-color:#2395c6; color:white;" id="btnUploadSignature">Upload</button>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

<!-- The Modal -->
<div class="modal trigger-company-modal" id="employeeCodeSettingModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title btn-heading-title" id="exampleModalLabel">
                    <span class="formType">Employee CodeSetting </span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#addEmployeeModal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-body-font">
                <div class="row gy-3">
                    <!-- Digits For Employee Code -->
                    <div class="col-md-6">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="txtDigits" placeholder="Digits For Employee Code">
                            <label class="floating-label" for="txtDigits">Digits For Employee Code</label>
                        </div>
                    </div>

                    <!-- Max Employee Code -->
                    <div class="col-md-12">
                        <div class="form-check form-check-inline">
                            <strong>Max Employee Code:</strong>
                        </div>
                        <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="companyWise" name="MaxEmployeeCode" value="Company Wise">
                            <label class="form-check-label" for="companyWise">Company Wise</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input type="radio" class="form-check-input" id="groupCompanyWise" name="MaxEmployeeCode" value="Group Company Wise">
                            <label class="form-check-label" for="groupCompanyWise">Group Company Wise</label>
                        </div>
                    </div>

                    <!-- Alpha Numeric Code -->
                    <div class="col-md-12">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="alphaNumericCode" value="Alpha Numeric Code">
                            <label class="form-check-label" for="alphaNumericCode">Alpha Numeric Code</label>
                        </div>
                    </div>

                    <!-- Company Code -->
                    <div class="col-md-6 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="companyCode" value="Company Code">
                            <label class="form-check-label" for="companyCode">Company Code</label>
                        </div>
                    </div>

                    <!-- Branch Code -->
                    <div class="col-md-6 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="branchCode" value="Branch Code">
                            <label class="form-check-label" for="branchCode">Branch Code</label>
                        </div>
                    </div>

                    <!-- Designation Code -->
                    <div class="col-md-6 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="designationCode" value="Designation Code">
                            <label class="form-check-label" for="designationCode">Designation Code</label>
                        </div>
                    </div>

                    <!-- Category Code -->
                    <div class="col-md-6 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="categoryCode" value="Category Code">
                            <label class="form-check-label" for="categoryCode">Category Code</label>
                        </div>
                    </div>

                    <!-- Employee Type Code -->
                    <div class="col-md-6 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="employeeTypeCode" value="Employee Type Code">
                            <label class="form-check-label" for="employeeTypeCode">Employee Type Code</label>
                        </div>
                    </div>
                    <div class="col-md-6 other-checkboxes">
                        <button type="button" class="btn btn-secondary p-1 " style="width:80px;height:30px;" id="minusButton">-</button>
                        <button type="button" class="btn btn-secondary" style="width:80px;height:30px;" id="clearButton">Clear</button>
                    </div>

                    <!-- Date Code -->
                    <div class="col-md-12 other-checkboxes">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="dateCodeCheckbox" value="Date Code">
                            <label class="form-check-label" for="dateCodeCheckbox">Date Code</label>
                        </div>
                    </div>

                    <!-- Joining Date -->
                    <div class="col-md-6 date-checkbox">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="joiningDateCheckbox" value="Joining Date">
                            <label class="form-check-label" for="joiningDateCheckbox">Joining Date</label>
                        </div>
                    </div>
                    <div class="col-md-6 date-format">
                        <div class="form-group position-relative">
                            <select class="form-control floating-input" id="joiningDateFormat">
                                <option value="DDMM">DDMM</option>
                                <option value="DDMMYY">DDMMYY</option>
                                <option value="DDMMYYYY">DDMMYYYY</option>
                                <option value="MMDD">MMDD</option>
                                <option value="MMYY">MMYY</option>
                                <option value="MMYYYY">MMYYYY</option>
                                <option value="MMDDYY">MMDDYY</option>
                                <option value="MMDDYYYY">MMDDYYYY</option>
                                <option value="MMYYDD">MMYYDD</option>
                                <option value="MMYYYYDD">MMYYYYDD</option>
                                <option value="YYMM">YYMM</option>
                                <option value="YYDDMM">YYDDMM</option>
                                <option value="YYMMDD">YYMMDD</option>
                                <option value="YYYYMM">YYYYMM</option>
                                <option value="YYYYMMDD">YYYYMMDD</option>
                                <option value="YYYYDDMM">YYYYDDMM</option>
                                <option value="YYYY">YYYY</option>
                                <option value="YY">YY</option>
                            </select>
                            <label class="floating-label" for="joiningDateFormat">Join Date Format</label>
                        </div>
                    </div>

                    <!-- Date Of Birth -->
                    <div class="col-md-6 date-checkbox">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="dateOfBirthCheckbox" value="Date Of Birth">
                            <label class="form-check-label" for="dateOfBirthCheckbox">Date Of Birth</label>
                        </div>
                    </div>
                    <div class="col-md-6 date-format">
                        <div class="form-group position-relative">
                            <select class="form-control floating-input" id="dateOfBirthFormat">
                                <option value="DDMM">DDMM</option>
                                <option value="DDMMYY">DDMMYY</option>
                                <option value="DDMMYYYY">DDMMYYYY</option>
                                <option value="MMDD">MMDD</option>
                                <option value="MMYY">MMYY</option>
                                <option value="MMYYYY">MMYYYY</option>
                                <option value="MMDDYY">MMDDYY</option>
                                <option value="MMDDYYYY">MMDDYYYY</option>
                                <option value="MMYYDD">MMYYDD</option>
                                <option value="MMYYYYDD">MMYYYYDD</option>
                                <option value="YYMM">YYMM</option>
                                <option value="YYDDMM">YYDDMM</option>
                                <option value="YYMMDD">YYMMDD</option>
                                <option value="YYYYMM">YYYYMM</option>
                                <option value="YYYYMMDD">YYYYMMDD</option>
                                <option value="YYYYDDMM">YYYYDDMM</option>
                                <option value="YYYY">YYYY</option>
                                <option value="YY">YY</option>
                            </select>
                            <label class="floating-label" for="dateOfBirthFormat">Date Of Birth Format</label>
                        </div>
                    </div>

                    <!-- Current Date -->
                    <div class="col-md-6 date-checkbox">
                        <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" id="currentDateCheckbox" value="Current Date">
                            <label class="form-check-label" for="currentDateCheckbox">Current Date</label>
                        </div>
                    </div>
                    <div class="col-md-6 date-format">
                        <div class="form-group position-relative">
                            <select class="form-control floating-input" id="currentDateFormat">
                                <option value="DDMM">DDMM</option>
                                <option value="DDMMYY">DDMMYY</option>
                                <option value="DDMMYYYY">DDMMYYYY</option>
                                <option value="MMDD">MMDD</option>
                                <option value="MMYY">MMYY</option>
                                <option value="MMYYYY">MMYYYY</option>
                                <option value="MMDDYY">MMDDYY</option>
                                <option value="MMDDYYYY">MMDDYYYY</option>
                                <option value="MMYYDD">MMYYDD</option>
                                <option value="MMYYYYDD">MMYYYYDD</option>
                                <option value="YYMM">YYMM</option>
                                <option value="YYDDMM">YYDDMM</option>
                                <option value="YYMMDD">YYMMDD</option>
                                <option value="YYYYMM">YYYYMM</option>
                                <option value="YYYYMMDD">YYYYMMDD</option>
                                <option value="YYYYDDMM">YYYYDDMM</option>
                                <option value="YYYY">YYYY</option>
                                <option value="YY">YY</option>
                            </select>
                            <label class="floating-label" for="currentDateFormat">Current Date Format</label>
                        </div>
                    </div>

                    <!-- Sample Code -->
                    <div class="col-md-12">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="txtSampleCode" placeholder="Sample Code">
                            <label class="floating-label" for="txtSampleCode">Sample Code</label>
                        </div>
                    </div>
                </div>

                <div class="row mb-3  mt-3">
                    <div class="col-md-12">
                        <strong>Example:</strong><br />
                    </div>
                    <div class="col-md-4"> CM = Company Code </div>
                    <div class="col-md-4"> BR = Branch Code</div>
                    <div class="col-md-4"> DE = Designation Code</div>
                    <div class="col-md-4"> CA = Category</div>
                    <div class="col-md-4"> TY = Employee Type Master</div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal trigger-company-modal" id="otherDetailModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title btn-heading-title" id="exampleModalLabel">
                    <span class="formType">Other Detail</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#addEmployeeModal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-body-font">

                <div style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; margin: 5px; position: relative;">
                    <div style="position: absolute; top: -10px; left: 10px; background: white; padding: 0 5px; font-weight: bold;">
                        DIRECTOR DETAIL
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="form-group position-relative">
                                <input type="text" class="form-control floating-input" id="directorName" placeholder="Name">
                                <label class="floating-label" for="directorName">Name</label>
                                <span id="spnDirectorName" class="error-message" style="display: none; color: red;">Name is required</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="form-group position-relative">
                                <input type="text" class="form-control floating-input" id="directorAddress" placeholder="Address">
                                <label class="floating-label" for="directorAddress">Address</label>
                                <span id="spnDirectorAddress" class="error-message" style="display: none; color: red;">Address is required</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="form-group position-relative">
                                <input type="date" class="form-control floating-input" id="directorDOB" placeholder="Date of Birth">
                                <label class="floating-label" for="directorDOB">Date of Birth</label>
                                <span id="spnDirectorDOB" class="error-message" style="display: none; color: red;">Date of Birth is required</span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="form-group position-relative">
                                <input type="text" class="form-control floating-input" id="directorBranch" placeholder="Branch">
                                <label class="floating-label" for="directorBranch">Branch</label>
                                <span id="spnDirectorBranch" class="error-message" style="display: none; color: red;">Branch is required</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="form-group position-relative">
                                <input type="text" class="form-control floating-input" id="directorDesignation" placeholder="Designation">
                                <label class="floating-label" for="directorDesignation">Designation</label>
                                <span id="spnDirectorDesignation" class="error-message" style="display: none; color: red;">Designation is required</span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <button type="button" class="btn btn-primary" style="background-color:#2395c6; color:white;" id="saveDirectorDetail">Save</button>
                            <button type="button" class="btn  ms-2" style="background-color:lightgray;"  id="resetDirectorDetail">Reset</button>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="rowCount" id="rowCountDirector"></div>
                                <div id="gridContainerDirector">
                               
                                    <div class="d-flex justify-content-center align-items-center" style="height: 10vh;">
                                        <div class="spinner-border text-primary" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
          
                <!--hr manager-->
                <div class="row mt-3">
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="hrManager" placeholder="HR Manager">
                            <label class="floating-label" for="hrManager">HR Manager (Offer Letter)</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="hrManagerDesignation" placeholder="Designation">
                            <label class="floating-label" for="hrManagerDesignation">Designation of HR Manager (Offer Letter)</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="natureOfBusiness" placeholder="Nature of Business">
                            <label class="floating-label" for="natureOfBusiness">Nature Of Business</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="date" class="form-control floating-input" id="dateOfFactorySetup" placeholder="Date of Factory/Esta. Setup">
                            <label class="floating-label" for="dateOfFactorySetup">Date of Factory/Esta. Setup</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="factoryType" placeholder="Factory/Esta. Type">
                            <label class="floating-label" for="factoryType">Factory/Esta. Type</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="factoryLicenseOffice" placeholder="Factory/Esta. License Office">
                            <label class="floating-label" for="factoryLicenseOffice">Factory/Esta. License Office</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="factoryRegistrationNo" placeholder="Factory/Esta. Registration No.">
                            <label class="floating-label" for="factoryRegistrationNo">Factory/Esta. Registration No.</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="factoryLicenseNo" placeholder="Factory/Esta. License No.">
                            <label class="floating-label" for="factoryLicenseNo">Factory/Esta. License No.</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="tdsDeductor" placeholder="TDS Deductor">
                            <label class="floating-label" for="tdsDeductor">TDS Deductor (Form 16)</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="fatherName" placeholder="Father Name">
                            <label class="floating-label" for="fatherName">Father Name (Form 16)</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="managerDesignation" placeholder="Designation">
                            <label class="floating-label" for="managerDesignation">Designation of Manager (Form 16)</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <textarea class="form-control floating-input" id="citAddress" placeholder="CIT Address"></textarea>
                            <label class="floating-label" for="citAddress">CIT Address</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="text" class="form-control floating-input" id="citCity" placeholder="CIT City">
                            <label class="floating-label" for="citCity">CIT City</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="number" class="form-control floating-input" id="citPin" placeholder="CIT PIN" min="0">
                            <label class="floating-label" for="citPin">CIT PIN</label>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div class="form-group position-relative">
                            <input type="date" class="form-control floating-input" id="issueDate" placeholder="Issue Date">
                            <label class="floating-label" for="issueDate">Issue Date (Form 16)</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div class="form-group form-check position-relative">
                            <input type="checkbox" class="form-check-input" id="gstTravelExpenses">
                            <label class="form-check-label" for="gstTravelExpenses">GST (For Travel Expenses)</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal trigger-company-modal" id="emailSignatureModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title btn-heading-title" id="exampleModalLabel">
                    <span class="formType">Email Signature</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#addEmployeeModal" aria-label="Close"></button>
            </div>
            <div class="modal-body modal-body-font">
                <textarea style="width: 100%; height: 300px;" id="txtEmailSignature"></textarea>

            </div>
           

        </div>
    </div>
</div>

<div class="modal trigger-company-modal" id="addLetterHeadModel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title btn-heading-title"><span class="formType">Update</span> Company Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body modal-body-font">
                <div class="row">
                    <!-- Effective Date -->
                    <div class="col-md-6">
                        <div class="form-group mt-3 position-relative">
                            <input type="date" class="form-control floating-input" id="effectiveDate" required />
                            <label class="floating-label" for="effectiveDate">Effective Date *</label>
                        </div>
                    </div>

                    <!-- Company Name -->
                    <div class="col-md-6">
                        <div class="form-group mt-3 position-relative">
                            <input type="text" class="form-control floating-input" id="companyName" placeholder=" " required />
                            <label class="floating-label" for="companyName">Company Name *</label>
                        </div>
                    </div>

                    <!-- Company Address -->
                    <div class="col-md-12">
                        <div class="form-group mt-3 position-relative">
                            <textarea class="form-control floating-input" id="companyAddress" rows="3" placeholder=" " required></textarea>
                            <label class="floating-label" for="companyAddress">Company Address *</label>
                        </div>
                    </div>

                    <!-- Letter Head (Header) -->
                    <div class="col-md-6">
                        <div class="form-group mt-3 position-relative">
                            <input type="file" class="form-control floating-input" id="letterHeadHeader" accept=".jpg,.jpeg,.png,.pdf" />
                            <label class="floating-label" for="letterHeadHeader">Letter Head (Header)</label>
                        </div>
                    </div>

                    <!-- Letter Head (Footer) -->
                    <div class="col-md-6">
                        <div class="form-group mt-3 position-relative">
                            <input type="file" class="form-control floating-input" id="letterHeadFooter" accept=".jpg,.jpeg,.png,.pdf" />
                            <label class="floating-label" for="letterHeadFooter">Letter Head (Footer)</label>
                        </div>
                    </div>

                  
                </div>
            </div>

            <div class="modal-footer btn-heading-title">
                <button type="button" class="btn btn-primary" id="btnUpdateCompany" style="background-color:#2395c6; color:white;">Update</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
    let CompanyId=0;
    $("#AddCompanyDetails").click( () => {
        CompanyId=0;
            resetCompanyFormFields();
      $("#addCompanyDetailsModal").modal('show');
    })

       $(() => {
            //  $('.trigger-company-modal').on('shown.bs.modal', function () {
            //    $('#addCompanyDetailsModal').modal('show');
            // });

            $('.trigger-company-modal').on('hidden.bs.modal', function () {
                $('#addCompanyDetailsModal').modal('show');
            });

       });

       // logo upload
       $(() => {
        $('#companyLogo').on('change', function () {
            const file = this.files[0];

            if (file) {
                const fileType = file.type.toLowerCase();
                const fileName = file.name.toLowerCase();
                if (fileType === 'image/jpeg' && fileName.endsWith('.jpg')) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        $('#previewLogo').attr('src', e.target.result);
                    };

                    reader.readAsDataURL(file);

                    // Show Upload Button
                    $('#btnChangeLogo').removeClass('d-none');
                } else {
                    round_error_noti('Only JPG files are allowed.');
                    $('#companyLogo').val('');
                    $('#btnChangeLogo').addClass('d-none');
                }
            } else {
                // Reset if no file selected
                $('#btnChangeLogo').addClass('d-none');
            }
        });

        // Upload button click (you can connect this to your backend logic)
        $('#uploadLogoBtn').on('click', function () {
            alert('Upload logic goes here.');
        });
    });

   $(() => {
     $('#txtpfApplicable').change(function() {
          if ($(this).is(':checked'))
          {
               $(".tagPFNo").show();
          }
          else{
              $(".tagPFNo").hide();
          }
     })

      $('#txtesicApplicable').change(function() {
          if ($(this).is(':checked'))
          {
               $(".tagESICNo").show();
          }
          else{
              $(".tagESICNo").hide();
          }
     })

      $('#txtdigitalSignature').change(function() {
           if ($(this).is(':checked'))
           {
                  $(".tagDigitalSignature").show();
           }
           else{
                 $(".tagDigitalSignature").hide();
           }
      })
  })


    $(document).ready(function() {
        localStorage.removeItem('companyDetailsLocalStorage');
        CompanyDetailsDataTable();
          bindState();
            bindCity();
    });


    function CompanyDetailsDataTable() {
        $.ajax({
            type: "GET",
            url: '@baseUrl/CompanyDetailsAPI/GetAllCompanyDetails',
            success: function(data) {
                if (data.isSuccess) {
                    $("#gridContainerCompanyDetails").dxDataGrid({
                        dataSource: data.data,
                        stateStoring: {
                            enabled: true,
                            type: 'localStorage',
                            storageKey: 'companyDetailsLocalStorage'
                        },
                        rowHeight: 50, // Set the row height here
                        width: '100%', // Set the width of the grid to 100% of its container
                        columns: [
                            {
                                dataField: 'companyName',
                                caption: 'Company Name',
                                alignment: 'center',
                                fixed: true,
                                fixedPosition: 'left',
                                width: 200 // Set specific width for this column
                            },
                            { dataField: 'companyAddress', caption: 'Address', alignment: 'center', width: 200 },
                            { dataField: 'cityName', caption: 'City', alignment: 'center', width: 150 },
                            { dataField: 'stateName', caption: 'State', alignment: 'center', width: 150 },
                            { dataField: 'pinCode', caption: 'PIN Code', alignment: 'center', width: 100 },
                            { dataField: 'country', caption: 'Country', alignment: 'center', width: 150 },
                            { dataField: 'phoneNo', caption: 'Phone', alignment: 'center', width: 150 },
                            { dataField: 'emailAddress', caption: 'Email', alignment: 'center', width: 200 },
                            { dataField: 'dateFormat', caption: 'Date Format', alignment: 'center', width: 150 },
                            { dataField: 'fromDate', caption: 'From Date', alignment: 'center', dataType: 'date', width: 150 },
                            { dataField: 'website', caption: 'Website', alignment: 'center', width: 200 },
                            { dataField: 'pfTrustNo', caption: 'PF Trust No', alignment: 'center', width: 150 },
                            {
                                dataField: 'pfApplicable',
                                caption: 'PF Applicable',
                                alignment: 'center',
                                cellTemplate: function(container, options) {
                                    $('<div>').text(options.value ? 'Yes' : 'No').appendTo(container);
                                },
                                width: 150
                            },
                            { dataField: 'pfNo', caption: 'PF No', alignment: 'center', width: 150 },
                            {
                                dataField: 'esicApplicable',
                                caption: 'ESIC Applicable',
                                alignment: 'center',
                                cellTemplate: function(container, options) {
                                    $('<div>').text(options.value ? 'Yes' : 'No').appendTo(container);
                                },
                                width: 150
                            },
                            { dataField: 'esicNo', caption: 'ESIC No', alignment: 'center', width: 150 },
                            { dataField: 'tanNo', caption: 'TAN No', alignment: 'center', width: 150 },
                            { dataField: 'panNo', caption: 'PAN No', alignment: 'center', width: 150 },
                            { dataField: 'domainName', caption: 'Domain Name', alignment: 'center', width: 150 },
                            { dataField: 'companyCode', caption: 'Company Code', alignment: 'center', width: 150 },
                            { dataField: 'lwfNo', caption: 'LWF No', alignment: 'center', width: 150 },
                            { dataField: 'inOutDuration', caption: 'In-Out Duration', alignment: 'center', width: 150 },
                            {
                                dataField: 'hierarchyDesignation',
                                caption: 'Hierarchy Designation',
                                alignment: 'center',
                                cellTemplate: function(container, options) {
                                    $('<div>').text(options.value ? 'Yes' : 'No').appendTo(container);
                                },
                                width: 150
                            },
                            { dataField: 'employeeLicense', caption: 'Employee License', alignment: 'center', width: 150 },
                            { dataField: 'emailSignature', caption: 'Email Signature', alignment: 'center', width: 200 },
                            {
                                dataField: 'contractorCompany',
                                caption: 'Contractor Company',
                                alignment: 'center',
                                cellTemplate: function(container, options) {
                                    $('<div>').text(options.value ? 'Yes' : 'No').appendTo(container);
                                },
                                width: 150
                            },
                            {
                                dataField: 'isDigitalSignature',
                                caption: 'Is Digital Signature',
                                alignment: 'center',
                                cellTemplate: function(container, options) {
                                    $('<div>').text(options.value ? 'Yes' : 'No').appendTo(container);
                                },
                                width: 150
                            },
                            { dataField: 'selectWeekOffDay', caption: 'Week Off Day', alignment: 'center', width: 150 },
                            { dataField: 'alternateWeekOffDay', caption: 'Alternate Week Off Day', alignment: 'center', width: 150 },
                            { dataField: 'alternateFullWeekOff', caption: 'Alternate Full Week Off', alignment: 'center', width: 150 },
                            // { dataField: 'companyLogoUrl', caption: 'Company Logo URL', alignment: 'center', width: 200 },
                            // { dataField: 'digitalSignatureUrl', caption: 'Digital Signature URL', alignment: 'center', width: 200 },
                            // { dataField: 'digitalSignaturePassword', caption: 'Digital Signature Password', alignment: 'center', width: 200 },
                           
                             {
                                dataField: '',
                                caption: '',
                                alignment: 'center',
                                width: '50px',
                                type: 'buttons',
                                fixed: true,
                                fixedPosition: 'right',
                                cellTemplate: function(container, options) {
                                    var buttonElement = $('<div class="d-flex order-actions">' +
                                        '<a href="javascript:;" class="edit-action" title="Edit Company">' +
                                        '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">' +
                                        '<path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z"/>' +
                                        '</svg>' +
                                        '</a>' +
                                        '</div>')
                                        .on('dxclick', function() {
                                            updateCompanyDetails(options.data);
                                        }).appendTo(container);
                                }
                            },
                            {
                                dataField: '',
                                caption: '',
                                alignment: 'center',
                                width: '50px',
                                type: 'buttons',
                                fixed: true,
                                fixedPosition: 'right',
                                cellTemplate: function(container, options) {
                                    var buttonElement = $('<div class="d-flex order-actions">' +
                                        '<a href="javascript:;" class="delete-action" title="Delete Company">' +
                                        '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">' +
                                        '<path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>' +
                                        '</svg>' +
                                        '</a>' +
                                        '</div>')
                                        .on('dxclick', function() {
                                              deleteCompanyDetails(options.data);
                                        }).appendTo(container);
                                }
                            }
                        ],
                        columnsAutoWidth: false, // Disable auto width to use specified widths
                        wordWrapEnabled: false,
                        rowAlternationEnabled: false,
                        showBorders: true,
                        grouping: { autoExpandAll: true },
                        paging: { pageSize: 10 },
                        pager: { showPageSizeSelector: true, allowedPageSizes: [10, 25, 50, 100] },
                        headerFilter: { visible: true },
                        filterRow: { visible: true, applyFilter: "auto" },
                        allowColumnResizing: true,
                        groupPanel: { visible: true },
                        searchPanel: { visible: true, width: 240, placeholder: "Search..." },
                        columnFixing: {
                            enabled: true
                        },
                        scrolling: {
                            mode: "standard",
                            useNative: false,
                            scrollByContent: true,
                            scrollByThumb: true,
                        },
                        onContentReady(e) {
                                $('#rowCountCompanyDetails').html('Total Records: ' + e.component.totalCount());
                        }
                    });
                }
            },
            error: function(xhr, status, error) {
                console.error("AJAX Error: " + status + " - " + error);
            }
        });
    }

      function bindState() {
          $.ajax({
              type: "GET",
               url: '@baseUrl/StateAPI/GetAllState',
              success: function (data) {
                  if (data.isSuccess ) {
                        const $dropdown = $('#txtstate');
                      $dropdown.empty();
                      $dropdown.append('<option value="" selected disabled>Select State </option>');

                      $.each(data.data, function (index, state) {
                            $dropdown.append(`<option value="${state.stateId}" >${state.stateName}</option>`);
                      });
                  }
              },
              error: function (xhr, status, error) {
                  console.error("Error fetching states:", error);

              }
          });
      }

      function bindCity() {
        $.ajax({
            type: "GET",
              url: '@baseUrl/CityAPI/GetAllCity', // Replace with your actual API endpoint
            success: function(data) {
                if (data.isSuccess) {
                    const $dropdown = $('#txtcity');
                    $dropdown.empty();
                    $dropdown.append('<option value="" selected disabled>Select City</option>');

                    $.each(data.data, function(index, city) {
                        $dropdown.append(`<option value="${city.cityID}">${city.cityName}</option>`);
                    });
                }
            },
            error: function(xhr, status, error) {
                console.error("Error fetching cities:", error);
            }
        });
    }

         let selectWeekOffDay = [];
           let resultSelectWeekOffDay=null
    $(document).ready(function() {
        $(".alternateWeekOffDay").change(function() {
            if ($(this).is(":checked")) {
                if (selectWeekOffDay.length >= 2) {
                    alert("You can only select up to two days as alternate week off days.");
                    $(this).prop("checked", false); // Uncheck the third checkbox
                } else {
                    selectWeekOffDay.push($(this).val());
                }
            } else {
                // Remove the unchecked value from the array
                let index = selectWeekOffDay.indexOf($(this).val());
                if (index !== -1) {
                    selectWeekOffDay.splice(index, 1);
                }
            }

            // Convert the array to a comma-separated string or set to null if empty
              resultSelectWeekOffDay = selectWeekOffDay.length > 0 ? selectWeekOffDay.join(", ") : null;
        });
    });
    // null set function
  
        function getValueOrNull(selector) {
            var value = selector.val();
            return value === "" ? null : value;
        }

    $("#btnAddCompanyDetails").click(async function () {
        $("#btnAddCompanyDetails").prop("disabled", true);

        // Gather input values
          let companyName = $("#txtcompanyName").val()?.trim() ?? null;
        let companyAddress = $("#txtcompanyAddress").val()?.trim() ?? null;
        let cityId = $("#txtcity").val() ?? null;
        let cityName = $("#txtcity option:selected").text() ?? null;
        let stateId = $("#txtstate").val() ?? null;
        let stateName = $("#txtstate option:selected").text() ?? null;
        let pinCode = $("#txtpinCode").val()?.trim() ?? null;
        let country = $("#txtcountry option:selected").text() ?? null;
        let phoneNo = $("#txtphoneNo").val()?.trim() ?? null;
        let emailAddress = $("#txtemailAddress").val()?.trim() ?? null;
        let dateFormat = $("#txtdateFormat").val() ?? null;
        let fromDate = $("#txtfromDate").val() ?? null;
        let website = $("#txtwebsite").val()?.trim() ?? null;
        let pfTrustNo = $("#txtpfTrustNo").val()?.trim() ?? null;
        let pfApplicable = $("#txtpfApplicable").is(":checked") ?? false;
        let pfNo = $("#txtPFNo").val()?.trim() ?? null;
        let esicApplicable = $("#txtesicApplicable").is(":checked") ?? false;
        let esicNo = $("#txtESICNo").val()?.trim() ?? null;
        let tanNo = $("#txttanNo").val()?.trim() ?? null;
        let panNo = $("#txtpanNo").val()?.trim() ?? null;
        let domainName = $("#txtdomainName").val()?.trim() ?? null;
        let companyCode = $("#txtcompanyCode").val()?.trim() ?? null;
        let lwfNo = $("#txtlwfNo").val()?.trim() ?? null;
        let employeeCodeSetting = "EMP123"; // Placeholder, replace with actual logic
        let inOutDuration = $("#txtinOutDuration").val()?.trim() ?? null;
        let hierarchyDesignation = $("#txthierarchyDesignation").is(":checked") ?? false;
        let employeeLicense = $("#txtemployeeLicense").val() ?? null;
          let emailSignature =  $("#txtEmailSignature").val() ?? null;
        let contractorCompany = $("#txtcontractorCompany").is(":checked") ?? false;
        let digitalSignature = $("#txtdigitalSignature").is(":checked") ?? false;
        let isDigitalSignature = digitalSignature;
   
        // Alternate WeekOff Day
   
        let alternateWeekOffDay = $("#alternateWeekOffDay").val() ?? null;
        let alternateFullWeekOff = $("#alternateFullWeekOff").val()?.trim() ?? null;


        // Validation
        let isValid = true;

            if (!companyName) {
                $("#spncompanyName").show();
                isValid = false;
            } else {
                $("#spncompanyName").hide();
            }

            if (!companyAddress) {
                $("#spncompanyAddress").show();
                isValid = false;
            } else {
                $("#spncompanyAddress").hide();
            }

            if (!cityId) {
                $("#spncity").show();
                isValid = false;
            } else {
                $("#spncity").hide();
            }

            if (!stateId) {
                $("#spnstate").show();
                isValid = false;
            } else {
                $("#spnstate").hide();
            }

            if (!pinCode) {
                $("#spnpinCode").show();
                isValid = false;
            } else {
                $("#spnpinCode").hide();
            }

            if (!country) {
                $("#spncountry").show();
                isValid = false;
            } else {
                $("#spncountry").hide();
            }

            if (!fromDate) {
                $("#spnfromDate").show();
                isValid = false;
            } else {
                $("#spnfromDate").hide();
            }

            if (!domainName) {
                $("#spndomainName").show();
                isValid = false;
            } else {
                $("#spndomainName").hide();
            }

            // if (!alternateFullWeekOff) {
            //     $("#spnalternateFullWeekOff").show();
            //     isValid = false;
            // } else {
            //     $("#spnalternateFullWeekOff").hide();
            // }

            if (!isValid) {
                $("#btnAddCompanyDetails").prop("disabled", false);
                return;
            }

        // Create the model
              let model = {
                companyId: CompanyId,
                companyName: companyName === "" ? null : companyName,
                companyAddress: companyAddress === "" ? null : companyAddress,
                cityId: cityId === "" ? null : cityId,
                stateId: stateId === "" ? null : stateId,
                pinCode: pinCode === "" ? null : pinCode,
                country: country === "" ? null : country,
                phoneNo: phoneNo === "" ? null : phoneNo,
                emailAddress: emailAddress === "" ? null : emailAddress,
                dateFormat: dateFormat === "" ? null : dateFormat,
                fromDate: fromDate === "" ? null : fromDate,
                website: website === "" ? null : website,
                pfTrustNo: pfTrustNo === "" ? null : pfTrustNo,
                pfApplicable: pfApplicable,
                pfNo: pfNo === "" ? null : pfNo,
                esicApplicable: esicApplicable,
                esicNo: esicNo === "" ? null : esicNo,
                tanNo: tanNo === "" ? null : tanNo,
                panNo: panNo === "" ? null : panNo,
                domainName: domainName === "" ? null : domainName,
                companyCode: companyCode === "" ? null : companyCode,
                lwfNo: lwfNo === "" ? null : lwfNo,
                employeeCodeSetting: employeeCodeSetting === "" ? null : employeeCodeSetting,
                inOutDuration: inOutDuration === "" ? null : inOutDuration,
                hierarchyDesignation: hierarchyDesignation,
                employeeLicense: employeeLicense === "" ? null : employeeLicense,
                emailSignature: emailSignature === "" ? null : emailSignature,
                contractorCompany: contractorCompany,
                isDigitalSignature: isDigitalSignature,
                selectWeekOffDay: resultSelectWeekOffDay === "" ? null : resultSelectWeekOffDay,
                alternateWeekOffDay: alternateWeekOffDay === "" ? null : alternateWeekOffDay,
                alternateFullWeekOff: alternateFullWeekOff === "" ? null : alternateFullWeekOff,
                //employee code setting
                digitsForEmployeeCode: getValueOrNull($("#txtDigits")),
                maxEmployeeCode: $("input[name='MaxEmployeeCode']:checked").val(),
                alphaNumericCode: $("#alphaNumericCode").is(":checked"),
                sampleCode: getValueOrNull($("#txtSampleCode")),
                //other details
                  hrManager: getValueOrNull($("#hrManager")),
                hrManagerDesignation: getValueOrNull($("#hrManagerDesignation")),
                natureOfBusiness: getValueOrNull($("#natureOfBusiness")),
                dateOfFactorySetup: getValueOrNull($("#dateOfFactorySetup")),
                factoryType: getValueOrNull($("#factoryType")),
                factoryLicenseOffice: getValueOrNull($("#factoryLicenseOffice")),
                factoryRegistrationNo: getValueOrNull($("#factoryRegistrationNo")),
                factoryLicenseNo: getValueOrNull($("#factoryLicenseNo")),
                tdsDeductor: getValueOrNull($("#tdsDeductor")),
                fatherName: getValueOrNull($("#fatherName")),
                managerDesignation: getValueOrNull($("#managerDesignation")),
                citAddress: getValueOrNull($("#citAddress")),
                citCity: getValueOrNull($("#citCity")),
                    citPin: $("#citPin").val()==0?null:$("#citPin").val(),
                issueDate: getValueOrNull($("#issueDate")),
                gstTravelExpenses: $("#gstTravelExpenses").is(":checked"),

                createdBy: null,
                updatedBy: null
              };



        // AJAX request
        $.ajax({
             url: '@baseUrl/CompanyDetailsAPI/CreateCompanyDetails',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(model),
            success: function(response) {
                if (response.isSuccess) {
                    round_success_noti(response.responseMessage);
                    CompanyDetailsDataTable(); 
                  //$('#addCompanyDetailsModal').modal('hide');
                } else {
                    round_error_noti(response.responseMessage);
                }
                $("#btnAddCompanyDetails").prop("disabled", false);
            },
            error: function(xhr, status, error) {
                round_error_noti('Unable to save company details');
                $("#btnAddCompanyDetails").prop("disabled", false);
            }
        });

          


    });


    function deleteCompanyDetails(data) {
             if (!confirm("Are you sure you want to delete this reason?")) {
                 return; // Cancel the delete operation
             }

             var deleteObj = {
                 id: data.companyId,
                 deletedBy: null // Set this to the actual user if needed
             };

             $.ajax({
                   url: '@baseUrl/CompanyDetailsAPI/DeleteCompanyDetails',
                 type: 'DELETE',
                 contentType: 'application/json',
                 data: JSON.stringify(deleteObj),
                 success: function (response) {
                     if (response.isSuccess) {
                         round_success_noti(response.responseMessage);
                     } else {
                         round_error_noti(response.responseMessage);
                     }
                             CompanyDetailsDataTable();
                 },
                 error: function (error) {
                     console.log('Error deleting company details!');
                 }
             });
         }


// change logo

   $(document).ready(function() {
        // Show the Change Logo button when a file is selected
         $('#displayLogin').change(function() {
            if($(this).is(':checked'))
                 $('#btnChangeLogo').removeClass('d-none');
             else
                 $('#btnChangeLogo').addClass('d-none');

           });


        // Handle the Change Logo button click
        $('#btnChangeLogo').click(function() {
            var fileInput = $('#companyLogo')[0];
            var file = fileInput.files[0];

            // Validate the file
            if (!file) {
                  round_error_noti('Please select a file.');
                return;
            }
              const extension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();
              if (extension!='.jpg') {
                  round_error_noti('Please upload only a JPG file.');
                return;
            }
            // Create FormData object
            var formData = new FormData();
              formData.append('CompanyId',CompanyId );
            formData.append('LogoFile', file);
            formData.append('IsDisplayOnLogin', $('#displayLogin').is(':checked'));

            // Make AJAX call
            $.ajax({
                url: '@baseUrl/CompanyDetailsAPI/ChangeCompanyLogo', 
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    if(response.isSuccess)
                    {
                        round_success_noti(response.responseMessage)
                           $('#previewLogo').attr('src', response.data.companyLogoUrl);
                    }
                    else{
                        round_error_noti(response.responseMessage)
                    }
                },
                error: function(xhr, status, error) {
                      alerround_error_notit('An error occurred while changing the logo.');
                }
            });
        });
    });

    // upload letter header
    $(document).ready(function() {
        $('#btnUpdateCompany').click(function() {
            // Get the values from the form
            var companyName = $('#companyName').val();
            var companyAddress = $('#companyAddress').val();
            var effectiveDate = $('#effectiveDate').val();

            // Create FormData object
            var formData = new FormData();
            formData.append('companyId', CompanyId);
            formData.append('CompanyName', companyName);
            formData.append('CompanyAddress', companyAddress);
            formData.append('EffectiveDate', effectiveDate);

            // Append files to FormData
            var headerFile = $('#letterHeadHeader')[0].files[0];
            var footerFile = $('#letterHeadFooter')[0].files[0];

            if (headerFile) {
                formData.append('LetterHeadHeaderFile', headerFile);
            }

            if (footerFile) {
                formData.append('LetterHeadFooterFile', footerFile);
            }

            // Make AJAX call
            $.ajax({
                    url: '@baseUrl/CompanyDetailsAPI/UpdateLetterHead',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                      if(response.isSuccess)
                        {
                            round_success_noti(response.responseMessage)
                            $('#addLetterHeadModel').modal('hide');

                        }
                        else{
                            round_error_noti(response.responseMessage)
                        }
                },
                error: function(xhr, status, error) {
                    alert('An error occurred while updating the letterhead.');
                }
            });
        });
    });

    // upload digital signature
    $(document).ready(function() {
        $('#btnUploadSignature').click(function() {
            var fileInput = $('#digitalSignature')[0];
            var file = fileInput.files[0];
            var password = $('#signaturePassword').val();
              
            if (!file) 
            {
                $('#spnSignaturePassword').hide();
                round_error_noti('Please select a PFX file.');
                return;
            }

            const extension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();
            if (extension!='.pfx') 
            {
                round_error_noti('Please upload only a PFX file.');
                return;
            }
            if (!password) {
                $('#spnSignaturePassword').show();
                return;
            }
            else
            {
                $('#spnSignaturePassword').hide();
            }

            var formData = new FormData();
                formData.append('CompanyId', CompanyId);
                formData.append('DigitalSignatureFile', file);
                formData.append('DigitalSignaturePassword', password);
                formData.append('IsDigitalSignature', $("#txtdigitalSignature").is(":checked"));

            $.ajax({
                url: '@baseUrl/CompanyDetailsAPI/UpdateDigitalSignature', 
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(response) {
                    if(response.isSuccess)
                    {
                        round_success_noti(response.responseMessage)
                        $('#spnSignaturePassword').hide();
                        $('#digitalSignature').val('');
                        $('#signaturePassword').val('');

                    }
                    else{
                        round_error_noti(response.responseMessage)
                    }
                    
                },
                error: function(xhr, status, error) {
                   round_error_noti('An error occurred while uploading digital signature!');
                }
            });
        });
    });

    //Update company details
        function setFormValues(data) {
            // Set basic fields
            $("#txtDigits").val(data.digitsForEmployeeCode || "");
            $("input[name='MaxEmployeeCode'][value='" + data.maxEmployeeCode + "']").prop("checked", true);
            $("#alphaNumericCode").prop("checked", data.alphaNumericCode || false);
            if($("#alphaNumericCode").is(":checked"))
            {
                $('.other-checkboxes').show();
            }
            $("#txtSampleCode").val(data.sampleCode);
            // Parse and set sample code
            if (data.sampleCode) {
                parseSampleCode(data.sampleCode);
            }
        }

        // Function to parse sample code and set UI fields
        function parseSampleCode(sampleCode) {
            debugger
            // Reset all checkboxes
            $("#companyCode").prop("checked", false);
            $("#branchCode").prop("checked", false);
            $("#designationCode").prop("checked", false);
            $("#categoryCode").prop("checked", false);
            $("#employeeTypeCode").prop("checked", false);
            $("#dateCodeCheckbox").prop("checked", false);
            $("#joiningDateCheckbox").prop("checked", false);
            $("#dateOfBirthCheckbox").prop("checked", false);
            $("#currentDateCheckbox").prop("checked", false);

            // Split the sample code into parts
            var parts = sampleCode.split('+');
            var hasDateCode = false;

            // Iterate over each part and set the corresponding checkboxes and dropdowns
               parts.forEach(function(part) {
                console.log("Processing part:", part);

                if (part.includes("CM")) {
                    console.log("Found CM");
                    $("#companyCode").prop("checked", true);
                } else if (part.includes("BR")) {
                    console.log("Found BR");
                    $("#branchCode").prop("checked", true);
                } else if (part === "DE") {
                    console.log("Found DE");
                    $("#designationCode").prop("checked", true);
                } else if (part === "CA") {
                    console.log("Found CA");
                    $("#categoryCode").prop("checked", true);
                } else if (part === "TY") {
                    console.log("Found TY");
                    $("#employeeTypeCode").prop("checked", true);
                } else if (part.includes("JD")) {
                    console.log("Found JD");
                    $("#joiningDateCheckbox").prop("checked", true);
                    var dateFormat = part.match(/\(([^)]+)\)/)[1];
                    $("#joiningDateFormat").val(dateFormat);
                    hasDateCode = true;
                } else if (part.includes("DB")) {
                    console.log("Found DB");
                    $("#dateOfBirthCheckbox").prop("checked", true);
                    var dateFormat = part.match(/\(([^)]+)\)/)[1];
                    $("#dateOfBirthFormat").val(dateFormat);
                    hasDateCode = true;
                } else if (part.includes("CD")) {
                    console.log("Found CD");
                    $("#currentDateCheckbox").prop("checked", true);
                    var dateFormat = part.match(/\(([^)]+)\)/)[1];
                    $("#currentDateFormat").val(dateFormat);
                    hasDateCode = true;
                } else if (/^\d+$/.test(part)) {
                    console.log("Found digits");
                    $("#txtDigits").val(part);
                }
            });


            // Check dateCodeCheckbox if any date-related code is present
            $("#dateCodeCheckbox").prop("checked", hasDateCode);
            if($("#dateCodeCheckbox").is(":checked"))
            {
               $('.date-checkbox, .date-format').show();
            }
        }

    //update company details
      function updateCompanyDetails(data) {
              resetCompanyFormFields();
        CompanyId=data.companyId
        $("#txtcompanyName").val(data.companyName || "");
        $("#txtcompanyAddress").val(data.companyAddress || "");
        $("#txtcity").val(data.cityId || "");
        $("#txtstate").val(data.stateId || "");
        $("#txtpinCode").val(data.pinCode || "");
        if (data.country) {
            $("#txtcountry option").filter(function() {
                return $(this).text() === data.country;
            }).prop("selected", true);
        }
        $("#txtphoneNo").val(data.phoneNo || "");
        $("#txtemailAddress").val(data.emailAddress || "");
            $("#txtdateFormat").val(data.dateFormat || "dd/MM/yyyy");
         $("#txtfromDate").val(data.fromDate ? new Date(data.fromDate).toISOString().split('T')[0] : "");
        $("#txtwebsite").val(data.website || "");
        $("#txtpfTrustNo").val(data.pfTrustNo || "");
        $("#txtPFNo").val(data.pfNo || "");
        $("#txtESICNo").val(data.esicNo || "");
        $("#txttanNo").val(data.tanNo || "");
        $("#txtpanNo").val(data.panNo || "");
        $("#txtdomainName").val(data.domainName || "");
        $("#txtcompanyCode").val(data.companyCode || "");
        $("#txtlwfNo").val(data.lwfNo || "");
        $("#txtinOutDuration").val(data.inOutDuration || "");
        $("#txtemployeeLicense").val(data.employeeLicense || "");
        $("#txtEmailSignature").val(data.emailSignature || "");

        // Set checkbox values
        $("#txtpfApplicable").prop("checked", data.pfApplicable || false);
        $("#txtesicApplicable").prop("checked", data.esicApplicable || false);
        $("#txthierarchyDesignation").prop("checked", data.hierarchyDesignation || false);
        $("#txtcontractorCompany").prop("checked", data.contractorCompany || false);
        $("#txtdigitalSignature").prop("checked", data.isDigitalSignature || false);

        // Set selected options for dropdowns
        $("#txtcity option").filter(function() {
            return $(this).text() === data.cityName;
        }).prop("selected", true);

        $("#txtstate option").filter(function() {
            return $(this).text() === data.stateName;
        }).prop("selected", true);

        // Set alternate week off day values
        $("#alternateWeekOffDay").val(data.alternateWeekOffDay || "");
        $("#alternateFullWeekOff").val(data.alternateFullWeekOff || "");

        // Handle selectWeekOffDay
        if (data.selectWeekOffDay) {
            let weekOffDays = data.selectWeekOffDay.split(", ").map(day => day.trim());
            weekOffDays.forEach(day => {
                    $(`.alternateWeekOffDay[value="${day}"]`).prop("checked", true);
            });
        }

        //company logo
            $('#previewLogo').attr('src',data.companyLogoUrl||"@baseDomainUrl/uploads/defaultuserprofile/defaultlogo.jpg");
            $('#displayLogin').prop("checked", data.isDisplayOnLogin || false);

                //employee code setting
                setFormValues(data)

                // other details
                $("#hrManager").val(data.hrManager || "");
                $("#hrManagerDesignation").val(data.hrManagerDesignation || "");
                $("#natureOfBusiness").val(data.natureOfBusiness || "");
                $("#dateOfFactorySetup").val(data.dateOfFactorySetup ? new Date(data.dateOfFactorySetup).toISOString().split('T')[0] : "");
                $("#factoryType").val(data.factoryType || "");
                $("#factoryLicenseOffice").val(data.factoryLicenseOffice || "");
                $("#factoryRegistrationNo").val(data.factoryRegistrationNo || "");
                $("#factoryLicenseNo").val(data.factoryLicenseNo || "");
                $("#tdsDeductor").val(data.tdsDeductor || "");
                $("#fatherName").val(data.fatherName || "");
                $("#managerDesignation").val(data.managerDesignation || "");
                $("#citAddress").val(data.citAddress || "");
                $("#citCity").val(data.citCity || "");
                $("#citPin").val(data.citPin || "");
                $("#issueDate").val(data.issueDate ? new Date(data.issueDate).toISOString().split('T')[0] : "");
                $("#gstTravelExpenses").prop("checked", data.gstTravelExpenses || false);
               //director details
                localStorage.removeItem('directorDetailsLocalStorage');
                 DirectorDetailsDataTable();

                $(".compnayFormType").text("Update");
            $('#addCompanyDetailsModal').modal('show');

                //// director details
           

    }

     function resetCompanyFormFields() {
        // Reset text inputs
        $("#spncompanyName").hide();
        $("#spncompanyAddress").hide();
        $("#spncity").hide();
        $("#spnstate").hide();
        $("#spnpinCode").hide();
        $("#spncountry").hide();
        $("#spnfromDate").hide();
        $("#spndomainName").hide();
        CompanyId=0;
       $("#btnAddCompanyDetails").prop("disabled", false);
         $(".compnayFormType").text("Add");
        $("#txtcompanyName").val("");
        $("#txtcompanyAddress").val("");
        $("#txtpinCode").val("");
        $("#txtphoneNo").val("");
        $("#txtemailAddress").val("");
            $("#txtdateFormat").val("dd/MM/yyyy");
        $("#txtfromDate").val("");
        $("#txtwebsite").val("");
        $("#txtpfTrustNo").val("");
        $("#txtPFNo").val("");
        $("#txtESICNo").val("");
        $("#txttanNo").val("");
        $("#txtpanNo").val("");
        $("#txtdomainName").val("");
        $("#txtcompanyCode").val("");
        $("#txtlwfNo").val("");
        $("#txtinOutDuration").val("");
        $("#txtemployeeLicense").val("");
        $("#txtEmailSignature").val("");

        // Reset checkboxes
        $("#txtpfApplicable").prop("checked", false);
        $("#txtesicApplicable").prop("checked", false);
        $("#txthierarchyDesignation").prop("checked", false);
        $("#txtcontractorCompany").prop("checked", false);
        $("#txtdigitalSignature").prop("checked", false);

        // Reset dropdowns to default selected option
        $("#txtcity").val("");
        $("#txtstate").val("");
        $("#txtcountry").val("");

        // Reset alternate week off day values
        $("#alternateWeekOffDay").val("");
        $("#alternateFullWeekOff").val("");

        $(".alternateWeekOffDay").prop("checked", false);
        $('#displayLogin').prop("checked",false);
        // employee code setting
             $("#txtDigits").val("");
        $("#txtSampleCode").val("");

        // Reset radio buttons
        $("input[name='MaxEmployeeCode']").prop("checked", false);

        // Reset checkboxes
        $("#alphaNumericCode").prop("checked", false);
        $("#companyCode").prop("checked", false);
        $("#branchCode").prop("checked", false);
        $("#designationCode").prop("checked", false);
        $("#categoryCode").prop("checked", false);
        $("#employeeTypeCode").prop("checked", false);
        $("#dateCodeCheckbox").prop("checked", false);
        $("#joiningDateCheckbox").prop("checked", false);
        $("#dateOfBirthCheckbox").prop("checked", false);
        $("#currentDateCheckbox").prop("checked", false);
            $('.other-checkboxes').hide();
                $('.date-checkbox, .date-format').hide();
        // Reset dropdowns to their default values
        $("#joiningDateFormat").val("DDMM");
        $("#dateOfBirthFormat").val("DDMM");
        $("#currentDateFormat").val("DDMM");

        //other details
         $("#hrManager").val("");
        $("#hrManagerDesignation").val("");
        $("#natureOfBusiness").val("");
        $("#dateOfFactorySetup").val("");
        $("#factoryType").val("");
        $("#factoryLicenseOffice").val("");
        $("#factoryRegistrationNo").val("");
        $("#factoryLicenseNo").val("");
        $("#tdsDeductor").val("");
        $("#fatherName").val("");
        $("#managerDesignation").val("");
        $("#citAddress").val("");
        $("#citCity").val("");
        $("#citPin").val("");
        $("#issueDate").val("");
        $("#gstTravelExpenses").prop("checked", false);
        resetDirectorField();
    }

    // Employee code setting
     $(document).ready(function() {
        $('.other-checkboxes, .date-checkbox, .date-format').hide();

        $('#txtDigits').on('input', function() {
            updateSampleCode();
        });

        $('#alphaNumericCode').change(function() {
            if ($(this).is(':checked')) {
                $('.other-checkboxes').show();
            } else {
                $('.other-checkboxes').hide();
                $('.other-checkboxes input[type="checkbox"]').prop('checked', false);
            }
            updateSampleCode();
        });

        $('#dateCodeCheckbox').change(function() {
            if ($(this).is(':checked')) {
                $('.date-checkbox, .date-format').show();
            } else {
                $('.date-checkbox, .date-format').hide();
                $('.date-checkbox input[type="checkbox"]').prop('checked', false);
            }
            updateSampleCode();
        });

        $('.other-checkboxes input[type="checkbox"], .date-checkbox input[type="checkbox"]').change(function() {
            updateSampleCode();
        });

        $('.date-format select').change(function() {
            updateSampleCode();
        });

        // Handle minus button click
        $('#minusButton').click(function() {
            const sampleCode = $('#txtSampleCode').val();
            if (sampleCode) {
                const parts = sampleCode.split('+');
                const lastPart = parts.pop();
                parts.push('-', lastPart);
                $('#txtSampleCode').val(parts.join('+'));
            }
        });

        // Handle clear button click
          $('#clearButton').click(function() {
            const sampleCode = $('#txtSampleCode').val();
            if (sampleCode.includes('-')) {
                const parts = sampleCode.split('+');
                if (parts.length > 1 && parts[parts.length - 2] === '-') {
                    parts.splice(parts.length - 2, 1);
                    $('#txtSampleCode').val(parts.join('+'));
                }
            }
        });

        function updateSampleCode() 
        {
            let sampleCode = [];

            if ($('#alphaNumericCode').is(':checked')) {
                if ($('#companyCode').is(':checked')) {
                    sampleCode.push('CM');
                }
                if ($('#branchCode').is(':checked')) {
                    sampleCode.push('BR');
                }
                if ($('#designationCode').is(':checked')) {
                    sampleCode.push('DE');
                }
                if ($('#categoryCode').is(':checked')) {
                    sampleCode.push('CA');
                }
                if ($('#employeeTypeCode').is(':checked')) {
                    sampleCode.push('TY');
                }
            }

            if ($('#dateCodeCheckbox').is(':checked')) {
                if ($('#joiningDateCheckbox').is(':checked')) {
                    const joiningDateFormat = $('#joiningDateFormat').val();
                    sampleCode.push(`JD(${joiningDateFormat})`);
                }
                if ($('#dateOfBirthCheckbox').is(':checked')) {
                    const dateOfBirthFormat = $('#dateOfBirthFormat').val();
                    sampleCode.push(`DB(${dateOfBirthFormat})`);
                }
                if ($('#currentDateCheckbox').is(':checked')) {
                    const currentDateFormat = $('#currentDateFormat').val();
                    sampleCode.push(`CD(${currentDateFormat})`);
                }
            }

            const digits = $('#txtDigits').val();
            if (digits) {
                const zeros = '0'.repeat(digits - 1);
                sampleCode.push(zeros + '1');
            }

            $('#txtSampleCode').val(sampleCode.join('+'));
        }
    });

    // dirctor details

    
       
  function DirectorDetailsDataTable() {
      if (CompanyId == 0) {
             return;
        }
      $.ajax({
        type: "GET",
        url: '@baseUrl/DirectorDetailsAPI/GetDirectorDetailsByCompanyId/'+CompanyId,
        success: function (data) {
          if (data.isSuccess) {
            $("#gridContainerDirector").dxDataGrid({
              dataSource: data.data,
              stateStoring: {
                enabled: true,
                type: 'localStorage',
                storageKey: 'directorDetailsLocalStorage'
              },

              columns: [
                { dataField: 'directorName', caption: 'Director Name', alignment: 'center' },
                { dataField: 'directorAddress', caption: 'Director Address', alignment: 'center' },
                { dataField: 'directorBranch', caption: 'Branch', alignment: 'center' },
                { dataField: 'directorDesignation', caption: 'Designation', alignment: 'center' },
                { dataField: 'companyName', caption: 'Company Name', alignment: 'center' },
                
                {
                  dataField: '',
                  caption: '',
                  alignment: 'center',
                  width: '50px',
                  type: 'buttons',
                  cellTemplate: function (container, options) {
                    var buttonElement = $('<div class="d-flex order-actions">' +
                      '<a href="javascript:;" class="edit-action" title="Edit Director">' +
                      '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">' +
                      '<path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z"/>' +
                      '</svg>' +
                      '</a>' +
                      '</div>')
                      .on('dxclick', function () {
                        updateDirectorDetails(options.data);
                      }).appendTo(container);
                  }
                },
                {
                  dataField: '',
                  caption: '',
                  alignment: 'center',
                  width: '50px',
                  type: 'buttons',
                  cellTemplate: function (container, options) {
                    var buttonElement = $('<div class="d-flex order-actions">' +
                      '<a href="javascript:;" class="delete-action" title="Delete Director">' +
                      '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">' +
                      '<path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>' +
                      '</svg>' +
                      '</a>' +
                      '</div>')
                      .on('dxclick', function () {
                        deleteDirectorDetails(options.data);
                      }).appendTo(container);
                  }
                }
              ],

              columnsAutoWidth: true,
              showBorders: true,
              paging: { pageSize: 10 },
              pager: {
                showPageSizeSelector: true,
                allowedPageSizes: [10, 25, 50, 100]
              },
              filterRow: { visible: true, applyFilter: "auto" },
              headerFilter: { visible: true },
              groupPanel: { visible: true },
              searchPanel: { visible: true, width: 240, placeholder: "Search..." },
              onContentReady(e) {
                    $('#rowCountDirector').html('Total Records: ' + e.component.totalCount());
              }
            });
          }
        },
        error: function (xhr, status, error) {
          console.error("AJAX Error: " + status + " - " + error);
        }
      });
    }



     $("#saveDirectorDetail").click(async function() {
        if (CompanyId == 0) {
             round_error_noti("Please add company details before adding or updating a director.");
             return;
        }

        $("#saveDirectorDetail").prop("disabled", true);

        // Collect form data
        let directorName = $("#directorName").val()?.trim();
        let directorAddress = $("#directorAddress").val()?.trim();
        let directorDOB = $("#directorDOB").val();
        let directorBranch = $("#directorBranch").val()?.trim();
        let directorDesignation = $("#directorDesignation").val()?.trim();
             // Validation
            let isValid = true;

            if (!directorName) {
                $("#spnDirectorName").show();
                isValid = false;
            } else {
                $("#spnDirectorName").hide();
            }

            if (!directorAddress) {
                $("#spnDirectorAddress").show();
                isValid = false;
            } else {
                $("#spnDirectorAddress").hide();
            }

            if (!directorDOB) {
                $("#spnDirectorDOB").show();
                isValid = false;
            } else {
                $("#spnDirectorDOB").hide();
            }

            if (!directorBranch) {
                $("#spnDirectorBranch").show();
                isValid = false;
            } else {
                $("#spnDirectorBranch").hide();
            }

            if (!directorDesignation) {
                $("#spnDirectorDesignation").show();
                isValid = false;
            } else {
                $("#spnDirectorDesignation").hide();
            }

            if (!isValid) {
                $("#saveDirectorDetail").prop("disabled", false);
                return;
            }
  
        // Create the model
        let model = {
             DirectorDetailsId: DirectorDetailsId || 0,
             CompanyId:CompanyId,
            DirectorName: directorName,
            DirectorAddress: directorAddress,
            DirectorDOB: directorDOB,
            DirectorBranch: directorBranch,
            DirectorDesignation: directorDesignation,
            CreatedBy: null,
            UpdatedBy: null
        };

        // AJAX call
        $.ajax({
            url: DirectorDetailsId == 0 ? '@baseUrl/DirectorDetailsAPI/CreateDirectorDetails' : '@baseUrl/DirectorDetailsAPI/UpdateDirectorDetails',
                type: DirectorDetailsId == 0 ? 'POST' : 'PUT',
            contentType: 'application/json',
            data: JSON.stringify(model),
            success: function(response) {
                if (response.isSuccess) {
                    round_success_noti(response.responseMessage);
                        DirectorDetailsDataTable(); // Refresh your data table
                } else {
                    round_error_noti(response.responseMessage);
                }
                $("#saveDirectorDetail").prop("disabled", false);
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
                round_error_noti('Unable to save director details');
                $("#saveDirectorDetail").prop("disabled", false);
            }
        });
    });

    function resetDirectorField(){
        $("#saveDirectorDetail").text("Save");
            DirectorDetailsId=0;
        $("#directorName").val('');
        $("#directorAddress").val('');
        $("#directorDOB").val('');
        $("#directorBranch").val('');
        $("#directorDesignation").val('');

        // Hide error messages
        $("#spnDirectorName").hide();
        $("#spnDirectorAddress").hide();
        $("#spnDirectorDOB").hide();
        $("#spnDirectorBranch").hide();
        $("#spnDirectorDesignation").hide();
    }

        $("#resetDirectorDetail").click(()=>{
              $("#saveDirectorDetail").text("Save");
                  resetDirectorField();
        })
     let DirectorDetailsId=0;
    function updateDirectorDetails(directorDetail)
    {
         $("#saveDirectorDetail").text("Update");
         DirectorDetailsId=directorDetail.directorDetailsId;
        $("#directorName").val(directorDetail.directorName || '');
        $("#directorAddress").val(directorDetail.directorAddress || '');

        if (directorDetail.directorDOB) {
            const dob = new Date(directorDetail.directorDOB);
            const formattedDOB = dob.toISOString().split('T')[0]; // Format as YYYY-MM-DD
            $("#directorDOB").val(formattedDOB);
        } else {
            $("#directorDOB").val('');
        }

        $("#directorBranch").val(directorDetail.directorBranch || '');
        $("#directorDesignation").val(directorDetail.directorDesignation || '');

        // Hide error messages
        $("#spnDirectorName").hide();
        $("#spnDirectorAddress").hide();
        $("#spnDirectorDOB").hide();
        $("#spnDirectorBranch").hide();
        $("#spnDirectorDesignation").hide();
    }

        function deleteDirectorDetails(data) {
               if (!confirm("Are you sure you want to delete this director details?")) {
                   return; // Cancel the delete operation
               }

               var deleteObj = {
                   id: data.directorDetailsId,
                   deletedBy: null 
               };

               $.ajax({
                       url: '@baseUrl/DirectorDetailsAPI/DeleteDirectorDetails',
                   type: 'DELETE',
                   contentType: 'application/json',
                   data: JSON.stringify(deleteObj),
                   success: function (response) {
                       if (response.isSuccess) {
                           round_success_noti(response.responseMessage);
                       } else {
                           round_error_noti(response.responseMessage);
                       }
                                 DirectorDetailsDataTable();
                   },
                   error: function (error) {
                       console.log('Error deleting director details!');
                   }
               });
        }
</script>


